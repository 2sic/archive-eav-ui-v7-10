<div class="modal-header">
    <h3 class="modal-title">{{ 'ContentTypes.Title' | translate }}</h3>
</div>
<div class="modal-body">
    <div ng-controller="List as vm" class="ng-cloak">
        <!-- Buttons on top -->
        <button icon="plus" title="{{ 'General.Buttons.Add' | translate }}" type="button" class="btn btn-default" ng-click="vm.edit()"></button>

        <button icon="repeat" title="{{ 'General.Buttons.Refresh' | translate }}" type="button" class="btn" ng-click="vm.refresh()"></button>

        <button icon="flash" title="{{ 'General.Buttons.System' | translate }}" type="button" class="btn" ng-click="vm.liveEval()"></button>
        
        <!-- Table of content types for editing -->
        <table class="table table-hover">
            <thead>
            <tr>
                <th>{{ 'ContentTypes.TypesTable.Name' | translate }}</th>
                <th>{{ 'ContentTypes.TypesTable.Description' | translate }}</th>
                <th>{{ 'ContentTypes.TypesTable.Fields' | translate }}</th>
                <th>{{ 'ContentTypes.TypesTable.Items' | translate }}</th>
                <th>{{ 'ContentTypes.TypesTable.Permissions' | translate }}</th>
                <th> </th>
            </tr>
            </thead>
            <tbody>
            <tr ng-if="vm.items.isLoaded" ng-repeat="item in vm.items | orderBy:'Name'">
                <td><a ng-click="vm.edit(item)" target="_self">{{item.Name}}</a></td>
                <td>{{item.Description}}</td>
                <td>
                    <button type="button" class="btn btn-xs btn-default" ng-click="vm.editFields(item)">
                        <span icon="cog">&nbsp;{{item.Fields}}</span>
                    </button>
                </td>
                <td>
                    <button type="button" class="btn btn-xs btn-default" ng-click="vm.editItems(item)">
                        <span icon="list">&nbsp;{{item.Items}}</span>
                    </button>
                </td>
                <td>
                    <button type="button" class="btn btn-xs" ng-click="vm.permissions(item)" ng-if="vm.isGuid(item.StaticName)">
                        <span icon="user"/>&nbsp;/&nbsp;<span icon="lock"/>
                    </button>
                </td>
                <td>
                    <button type="button" class="btn btn-xs" ng-click="vm.tryToDelete(item)">
                        <span icon="remove"/>
                    </button>
                </td>
            </tr>
            <tr ng-if="!vm.items.length">
                <td colspan="100">{{ 'General.Messages.Loading' | translate }} / {{ 'General.Messages.NothingFound' | translate }}</td>
            </tr>
            </tbody>
        </table>

        <!-- import/export -->
        <h3>{{ 'ContentTypes.TitleExportImport' | translate }} </h3>
        <button type="button" class="btn" ng-click="vm.openExport()">
            <span icon="export"> {{ 'ContentTypes.Buttons.Export' | translate }}</span>
        </button>

        <button type="button" class="btn" ng-click="vm.openImport()">
            <span icon="import">{{ 'ContentTypes.Buttons.Import' | translate }}</span>
        </button>

    </div>
</div>
<div>

    <h3>todo</h3>
    <ol>
        <li>get validators to work on all dialogs</li>
        <li>this dialog doesn't refresh properly when I add/change stuff</li>
    </ol>
</div>
<div ng-if="vm.items != null" ng-click="vm.debug.autoEnableAsNeeded($event)">
    <eav-language-switcher></eav-language-switcher>

    <div ng-repeat="p in vm.items">
        <h4>{{p.Header.Title ? p.Header.Title : 'Edit'}}</h4>
        <eav-edit-entity-form entity="p.Entity" header="p.Header" register-edit-control="vm.registerEditControl"></eav-edit-entity-form>
    </div>



    <button ng-disabled="!vm.isValid()" ng-click="vm.save()" class="btn btn-primary submit-button">
        <span icon="ok" tooltip="{{ 'Button.Save' | translate }}"></span>
    </button>
    <button class="btn" ng-click="vm.saveAndKeepOpen()">
        <span icon="check" tooltip="{{ 'Button.SaveAndKeepOpen' | translate }}"></span>
    </button>

    <!-- note: published status will apply to all - so the first is taken for identification if published -->
    <span ng-if="vm.willPublish" icon="eye-open" tooltip="{{ 'Status.Published' | translate }} - {{ 'Message.WillPublish' | translate }}" ng-click="vm.togglePublish()"></span>
    <span ng-if="!vm.willPublish" icon="eye-close" tooltip="{{ 'Status.Unpublished' | translate }} - {{ 'Message.WontPublish' | translate }}" ng-click="vm.togglePublish()"></span>
    
    <span ng-if="vm.debug.on">
        <button tooltip="debug" icon="zoom-in" class="btn" ng-click="vm.showDebugItems = !vm.showDebugItems"></button>
    </span>

    <span class="pull-right" ng-if="false">
        todo: show more buttons...
        <button class="btn">
            <span icon="option-horizontal" tooltip="{{ 'Button.MoreOptions' | translate }}"></span>
        </button>

    </span>
    <div ng-if="vm.debug.on && vm.showDebugItems">
        <pre>{{ vm.items | json }}</pre>
    </div>
</div>
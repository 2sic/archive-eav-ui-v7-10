<!doctype html>
<html>
<head>
	<title>Test</title>
	<link href="PipelineDesigner.css" rel="stylesheet" />
</head>
<body>
	<div id="pipeline">
		<div id="DataSource1" class="dataSource" style="">1</div>
		<div id="DataSource2" class="dataSource" style="top:150px">2</div>
		<div id="DataSource3" class="dataSource" style="top:300px">3</div>
		<div id="DataSource4" class="dataSource" style="top:450px">4</div>
	</div>
	<script src="../../Scripts/jquery-1.9.1.min.js"></script>
	<script src="../../Scripts/jquery-ui-1.10.2.min.js"></script>
	<script src="assets/jquery.jsPlumb-1.6.4.js"></script>
	<script>
		//var instance = jsPlumb.getInstance({
		//	Container: 'pipeline',
		//	//Anchor: 'Continuous'
		//});
		jsPlumb.ready(function () {
			var dataSources = jsPlumb.getSelector(".dataSource");

			// the definition of source endpoints (the small blue ones)
			var sourceEndpoint = {
				paintStyle: { strokeStyle: "#7AB02C", fillStyle: "transparent", radius: 7, lineWidth: 3 },
				//maxConnections: -1,
				//isSource: true,
				//anchor: "Top",
				//anchor:[ "Perimeter", { shape:"Circle" } ],
				//anchor: ["Continuous", { faces: ["right"] }],
				anchor: ["Continuous", { faces: ["top"] }],
				//anchor: [0.5, 0, 0, -1],
				//overlays: getEndpointOverlays(true)
			};

			// the definition of target endpoints (will appear when the user drags a connection)
			var targetEndpoint = {
				paintStyle: { fillStyle: "#7AB02C", radius: 11 },
				anchor: ["Continuous", { faces: ["bottom"] }]
			};

			jsPlumb.doWhileSuspended(function () {
				$.each(dataSources, function (i, dataSource) {
					jsPlumb.addEndpoint(dataSource, sourceEndpoint, { uuid: i + '_Source' });
					jsPlumb.addEndpoint(dataSource, targetEndpoint, { uuid: i + '_Target' });
				});

				jsPlumb.connect({ uuids: ['3_Source', '2_Target'] });
				jsPlumb.connect({ uuids: ['2_Source', '1_Target'] });

				//instance.draggable(dataSources);
				jsPlumb.repaintEverything();
			});
		});
	</script>
</body>
</html>

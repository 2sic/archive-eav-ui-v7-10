!function(){angular.module("ContentExportApp",["EavAdminUi","EavDirectives","EavConfiguration","EavServices","ContentHelperFilters","ContentFormlyTypes"])}(),function(){function t(t,e,n,a,i,r,o,l,s,d){var u=this;u.formValues={};var c=Array.isArray(n)&&n.length>0,p="Selection";u.formFields=[{key:"AppId",type:"hidden",defaultValue:t},{key:"DefaultLanguage",type:"hidden",defaultValue:s("isoLangCode")(o.defaultLanguage)},{key:"ContentType",type:"hidden",defaultValue:e},{key:"Language",type:"select",expressionProperties:{"templateOptions.label":"'Content.Export.Fields.Language.Label' | translate","templateOptions.options":function(){var t=[{name:d.instant("Content.Export.Fields.Language.Options.All"),value:""}];return angular.forEach(o.languages,function(e){var n=s("isoLangCode")(e.key);t.push({name:n,value:n})}),t}},defaultValue:""},{key:"RecordExport",type:"radio",expressionProperties:{"templateOptions.label":"'Content.Export.Fields.RecordExport.Label' | translate","templateOptions.options":function(){var t=[{name:d.instant("Content.Export.Fields.RecordExport.Options.Blank"),value:"Blank"},{name:d.instant("Content.Export.Fields.RecordExport.Options.All"),value:"All"}];return c&&t.push({name:d.instant("Content.Export.Fields.RecordExport.Options.Selection",{count:n.length}),value:p}),t}},defaultValue:c?p:"All"},{key:"LanguageReferences",type:"radio",expressionProperties:{"templateOptions.label":"'Content.Export.Fields.LanguageReferences.Label' | translate","templateOptions.disabled":function(){return"Blank"===u.formValues.RecordExport},"templateOptions.options":function(){return[{name:d.instant("Content.Export.Fields.LanguageReferences.Options.Link"),value:"Link"},{name:d.instant("Content.Export.Fields.LanguageReferences.Options.Resolve"),value:"Resolve"}]}},defaultValue:"Link"},{key:"ResourcesReferences",type:"radio",expressionProperties:{"templateOptions.label":"'Content.Export.Fields.ResourcesReferences.Label' | translate","templateOptions.disabled":function(){return"Blank"===u.formValues.RecordExport},"templateOptions.options":function(){return[{name:d.instant("Content.Export.Fields.ResourcesReferences.Options.Link"),value:"Link"},{name:d.instant("Content.Export.Fields.ResourcesReferences.Options.Resolve"),value:"Resolve"}]}},defaultValue:"Link"}],u.exportContent=function(){a.exportContent(u.formValues,c&&u.formValues.RecordExport===p?n:null)},u.close=function(){l.dismiss("cancel")}}t.$inject=["appId","contentType","itemIds","contentExportService","eavAdminDialogs","eavConfig","languages","$uibModalInstance","$filter","$translate"],angular.module("ContentExportApp").controller("ContentExport",t)}(),function(){function t(t,e){function n(t,n){var a=e.getUrlPrefix("api")+"/eav/ContentExport/ExportContent",i=n?"&selectedids="+n.join():"",r=a+"?appId="+t.AppId+"&language="+t.Language+"&defaultLanguage="+t.DefaultLanguage+"&contentType="+t.ContentType+"&recordExport="+t.RecordExport+"&resourcesReferences="+t.ResourcesReferences+"&languageReferences="+t.LanguageReferences+i;window.open(r,"_blank","")}var a={exportContent:n};return a}t.$inject=["$http","eavConfig"],angular.module("ContentExportApp").factory("contentExportService",t)}(),function(){angular.module("ContentFormlyTypes",["naif.base64","formly","formlyBootstrap","ui.bootstrap"])}(),function(){angular.module("ContentFormlyTypes").config(["formlyConfigProvider",function(t){var e=t;e.setType({name:"file",template:"<span class='btn btn-default btn-square btn-file'><span class='glyphicon glyphicon-open'></span><input type='file' ng-model='model[options.key]' base-sixty-four-input /></span> <span ng-if='model[options.key]'>{{model[options.key].filename}}</span>",wrapper:["bootstrapLabel","bootstrapHasError"]}),e.setType({name:"hidden",template:"<input style='display:none' ng-model='model[options.key]' />",wrapper:["bootstrapLabel","bootstrapHasError"]})}])}(),function(){angular.module("ContentHelperFilters",[]),angular.module("ContentHelperFilters").filter("isoLangCode",function(){return function(t){return 5!=t.length?t:t.substring(0,2).toLowerCase()+"-"+t.substring(3,5).toUpperCase()}})}(),function(){angular.module("ContentImportApp",["EavAdminUi","EavDirectives","EavConfiguration","EavServices","ContentHelperFilters","ContentFormlyTypes"])}(),function(){function t(t,e,n,a,i,r,o,l,s,d){var u=this;u.debug=o,u.formValues={},u.formFields=[{key:"AppId",type:"hidden",defaultValue:t},{key:"DefaultLanguage",type:"hidden",defaultValue:s("isoLangCode")(r.defaultLanguage)},{key:"ContentType",type:"hidden",defaultValue:e},{key:"File",type:"file",templateOptions:{required:!0},expressionProperties:{"templateOptions.label":"'Content.Import.Fields.File.Label' | translate"}},{key:"ResourcesReferences",type:"radio",expressionProperties:{"templateOptions.label":"'Content.Import.Fields.ResourcesReferences.Label' | translate","templateOptions.options":function(){return[{name:d.instant("Content.Import.Fields.ResourcesReferences.Options.Keep"),value:"Keep"},{name:d.instant("Content.Import.Fields.ResourcesReferences.Options.Resolve"),value:"Resolve"}]}},defaultValue:"Keep"},{key:"ClearEntities",type:"radio",expressionProperties:{"templateOptions.label":"'Content.Import.Fields.ClearEntities.Label' | translate","templateOptions.options":function(){return[{name:d.instant("Content.Import.Fields.ClearEntities.Options.None"),value:"None"},{name:d.instant("Content.Import.Fields.ClearEntities.Options.All"),value:"All"}]}},defaultValue:"None"}],u.viewStates={Waiting:0,Default:1,Evaluated:2,Imported:3},u.viewStateSelected=u.viewStates.Default,u.evaluationResult={},u.importResult={},u.evaluateContent=function(){return u.viewStateSelected=u.viewStates.Waiting,n.evaluateContent(u.formValues).then(function(t){u.evaluationResult=t.data,u.viewStateSelected=u.viewStates.Evaluated})},u.importContent=function(){return u.viewStateSelected=u.viewStates.Waiting,n.importContent(u.formValues).then(function(t){u.importResult=t.data,u.viewStateSelected=u.viewStates.Imported})},u.reset=function(){u.formValues={},u.evaluationResult={},u.importResult={}},u.back=function(){u.viewStateSelected=u.viewStates.Default},u.close=function(){u.viewStateSelected=u.viewStates.Default,l.dismiss("cancel")}}t.$inject=["appId","contentType","contentImportService","eavAdminDialogs","eavConfig","languages","debugState","$uibModalInstance","$filter","$translate"],angular.module("ContentImportApp").controller("ContentImport",t)}(),function(){function t(t){function e(e){return t.post("eav/ContentImport/EvaluateContent",{AppId:e.AppId,DefaultLanguage:e.DefaultLanguage,ContentType:e.ContentType,ContentBase64:e.File.base64,ResourcesReferences:e.ResourcesReferences,ClearEntities:e.ClearEntities})}function n(e){return t.post("eav/ContentImport/ImportContent",{AppId:e.AppId,DefaultLanguage:e.DefaultLanguage,ContentType:e.ContentType,ContentBase64:e.File.base64,ResourcesReferences:e.ResourcesReferences,ClearEntities:e.ClearEntities})}var a={evaluateContent:e,importContent:n};return a}t.$inject=["$http"],angular.module("ContentImportApp").factory("contentImportService",t)}(),function(){function t(t,e,n,a,i){var r=this;r.mode=t,r.entityId=e,r.contentType=n,r.TestMessage="Test message the controller is binding correctly...",r.history=function(){return a.openItemHistory(r.entityId)},r.close=function(){i.dismiss("cancel")}}t.$inject=["mode","entityId","contentType","eavAdminDialogs","$uibModalInstance"],angular.module("ContentEditApp",["EavServices","EavAdminUi"]).controller("EditContentItem",t)}(),function(){"use strict";function t(t,e,n,a,i,r,o,l,s,d,u,c,p){function m(){x=t(n,a),d.all([h(),x.getColumns()]).then(function(t){var e=I(t[1].data);R.gridOptions.api.setColumnDefs(e);var n=R.gridOptions.api.gridPanel.eBodyContainer.clientWidth,a=R.gridOptions.api.gridPanel.eBodyViewport.clientWidth;a>n&&g(n);var i=p.get();R.gridOptions.api.setFilterModel(i)})}function v(){var t=R.gridOptions.api.getFilterModel();console.log("current filter: ",t),alert("check console for filter information")}function g(t){var e=s.getTop().value.modalDomEl,n=e.children();n.css("width",t+47+"px")}function f(){i.openItemNew(a,h)}function b(){var t=null,e=!1,r=R.gridOptions.api.getFilterModel();for(var o in r)if(r.hasOwnProperty(o)){e=!0;break}return e&&(t=[],R.gridOptions.api.forEachNodeAfterFilterAndSort(function(e){t.push(e.data.Id)}),0===t.length&&(t=null)),i.openContentExport(n,a,null,t)}function y(t){i.openItemEditWithEntityId(t.data.Id,h)}function h(){var t={},e={};return R.gridOptions.api&&(t=R.gridOptions.api.getSortModel(),e=R.gridOptions.api.getFilterModel()),x.liveListSourceRead().then(function(n){R.gridOptions.api.setRowData(n.data),R.gridOptions.api.setSortModel(t),R.gridOptions.api.setFilterModel(e)})}function I(t){var e=N;return angular.forEach(t,function(t){if(t.IsTitle)return void(N[2].eavAttribute=t);var n={eavAttribute:t,headerName:t.StaticName,field:t.StaticName,cellRenderer:D,filterParams:{cellRenderer:w}};switch(t.Type){case"Entity":try{n.allowMultiValue=t.Metadata.Entity.AllowMultiValue}catch(a){n.allowMultiValue=!0}n.cellRenderer=k,n.valueGetter=T;break;case"DateTime":try{n.useTimePicker=t.Metadata.DateTime.UseTimePicker}catch(a){n.useTimePicker=!1}n.valueGetter=E;break;case"Boolean":n.valueGetter=C;break;case"Number":n.filter="number"}e.push(n)}),e}function T(t){var e=t.data[t.colDef.field];return 0===e.length?null:e.map(function(t){return t._Title})}function S(t){return[t.data.IsPublished?"is published":"is not published",t.data.Metadata?"is metadata":"is not metadata"]}function E(t){var e=t.data[t.colDef.field];return e?t.colDef.useTimePicker?e.substr(0,19).replace("T"," "):e.substr(0,10):null}function C(t){var e=t.data[t.colDef.field];return"boolean"!=typeof e?null:e.toString()}function D(t){if("string"!=typeof t.value||null===t.value)return t.value;var e=P(t.value);return'<span ng-non-bindable><span title="'+e+'">'+e+"</span></span>"}function w(t){return D(t)||"(empty)"}function P(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function k(t){if(!Array.isArray(t.value))return null;var e=P(t.value.join(", ")),n='<span title="'+e+'">';return t.colDef.allowMultiValue&&(n+='<span class="badge badge-primary">'+t.value.length+"</span> "),n+=e+"</span>"}function O(t){c.tryDeleteAndAskForce(a,t._RepositoryId,t._Title).then(h)}function A(t){var e=[{ContentTypeName:a,DuplicateEntity:t.Id}];i.openEditItems(e,x.liveListReload)}function L(){l.dismiss("cancel")}var x,R=angular.extend(this,{debug:o,gridOptions:{enableSorting:!0,enableFilter:!0,rowHeight:39,colWidth:155,headerHeight:38,angularCompileRows:!0},add:f,refresh:h,openExport:b,tryToDelete:O,openDuplicate:A,close:L,debugFilter:v}),N=[{headerName:"ID",field:"Id",width:50,template:'<span tooltip-append-to-body="true" uib-tooltip="Id: {{data.Id}}\nRepoId: {{data._RepositoryId}}\nGuid: {{data.Guid}}" ng-bind="data.Id"></span>',cellClass:"clickable",filter:"number",onCellClicked:y},{headerName:"Status",field:"IsPublished",width:75,suppressSorting:!0,template:"<span class=\"glyphicon\" ng-class=\"{'glyphicon-eye-open': data.IsPublished, 'glyphicon-eye-close' : !data.IsPublished}\" tooltip-append-to-body=\"true\" uib-tooltip=\"{{ 'Content.Publish.' + (data.IsPublished ? 'PnV': data.IsPublishedEntity ? 'DoP' : 'D') | translate }}\"></span> <span icon=\"{{ data.DraftEntity || data.PublishedEntity ? 'link' : '' }}\" tooltip-append-to-body=\"true\" uib-tooltip=\"{{ (data.DraftEntity ? 'Content.Publish.HD' :'') | translate:'{ id: data.DraftEntity._RepositoryId }' }} {{ data.DraftEntity._RepositoryId }}\n{{ (data.PublishedEntity ? 'Content.Publish.HP' :'') | translate }} {{ data.PublishedEntity._RepositoryId }}\"></span> <span ng-if=\"data.Metadata\" tooltip-append-to-body=\"true\" uib-tooltip=\"Metadata for type {{ data.Metadata.TargetType}}, id {{ data.Metadata.KeyNumber }}{{ data.Metadata.KeyString }}{{ data.Metadata.KeyGuid }}\" icon=\"tag\"></span>",valueGetter:S},{headerName:"Title",field:"_Title",width:216,cellClass:"clickable",template:"<span tooltip-append-to-body=\"true\" uib-tooltip=\"{{data._Title}}\" ng-bind=\"data._Title + ' ' + ((!data._Title ? 'Content.Manage.NoTitle':'') | translate)\"></span>",filter:"text",onCellClicked:y},{headerName:"",width:70,suppressSorting:!0,suppressMenu:!0,template:'<button type="button" class="btn btn-xs btn-square" ng-click="vm.openDuplicate(data)" tooltip-append-to-body="true" uib-tooltip="{{ \'General.Buttons.Copy\' | translate }}"><i icon="duplicate"></i></button> <button type="button" class="btn btn-xs btn-square" ng-click="vm.tryToDelete(data, false)" tooltip-append-to-body="true" uib-tooltip="{{ \'General.Buttons.Delete\' | translate }}"><i icon="remove"></i> </button>'}];m()}t.$inject=["contentItemsSvc","eavConfig","appId","contentType","eavAdminDialogs","toastr","debugState","$uibModalInstance","$uibModalStack","$q","$translate","entitiesSvc","agGridFilters"],angular.module("ContentItemsAppAgnostic",["EavConfiguration","EavAdminUi","EavServices"]).controller("ContentItemsList",t)}(),function(){"use strict";angular.module("ContentItemsAppAgnostic").factory("agGridFilters",function(){return{get:function(){if(!window.$2sxc)return{};var t=window.$2sxc.urlParams.get("filters"),e=null;if(!t)return{};"="===t.charAt(t.length-1)&&(t=atob(t));try{e=JSON.parse(t),console.log("found filters for this list:",e)}catch(n){console.log("can't parse json with filters from url: ",t)}if(!e)return{};e.IsPublished===!0?e.IsPublished=["is published"]:e.IsPublished===!1&&console.warn("filter ispublished = false is not implemented yet"),"undefined"!=typeof e.IsMetadata&&(Array.isArray(e.IsPublished)||(e.IsPublished=[]),e.IsPublished.push(e.IsMetadata?"is metadata":"is not metadata"),delete e.IsMetadata);for(var a in e)e.hasOwnProperty(a)&&"number"==typeof e[a]&&(e[a]={filter:e[a],type:1});return console.log("will try to apply filter: ",e),e}}})}(),function(){function t(t,e,n,a,i){var r=this,o=n(t,e);r.entityId=e,r.items=o.liveList(),r.close=function(){a.dismiss("cancel")},r.details=function(t){i.open({animation:!0,templateUrl:"content-items/history-details.html",controller:"HistoryDetails",controllerAs:"vm",resolve:{changeId:function(){return t.ChangeId},dataSvc:function(){return o}}})}}function e(t,e,n){var a=this;alert("not implemented yet");var i=e;i.getVersionDetails(t).then(function(t){alert(t.data),a.items=t.data}),a.close=function(){n.dismiss("cancel")}}t.$inject=["appId","entityId","historySvc","$uibModalInstance","$uibModal"],e.$inject=["changeId","dataSvc","$uibModalInstance"],angular.module("HistoryApp",["EavServices","EavConfiguration","eavTemplates"]).controller("History",t).controller("HistoryDetails",e)}(),function(){angular.module("ContentTypesApp",["EavServices","EavAdminUi","EavDirectives"]).constant("license",{createdBy:"2sic internet solutions",license:"MIT"})}(),function(){function contentTypeListController(contentTypeSvc,eavAdminDialogs,appId,debugState,$translate,eavConfig){var vm=this,svc=contentTypeSvc(appId);vm.debug=debugState,vm.items=svc.liveList(),vm.refresh=svc.liveListReload,vm.tryToDelete=function(t){$translate("General.Questions.Delete",{target:"'"+t.Name+"' ("+t.Id+")"}).then(function(e){confirm(e)&&svc["delete"](t)})},vm.edit=function(t){void 0===t&&(t=svc.newItem()),eavAdminDialogs.openContentTypeEdit(t,vm.refresh)},vm.createGhost=function(){var t=window.prompt("to create a ghost content-type enter source static name / id - this is a very advanced operation - read more about it on 2sxc.org/help?tag=ghost");t&&svc.createGhost(t)},vm.editFields=function(t){eavAdminDialogs.openContentTypeFields(t,vm.refresh)},vm.editItems=function(t){eavAdminDialogs.openContentItems(svc.appId,t.StaticName,t.Id,vm.refresh)},vm.addItem=function(t){eavAdminDialogs.openItemNew(t,vm.refresh)},vm.liveEval=function admin(){$translate("General.Questions.SystemInput").then(function(msg){var inp=prompt(msg);inp&&eval(inp)})},vm.changeScope=function(){$translate("ContentTypes.Buttons.ChangeScopeQuestion").then(function(t){var e=prompt(t);e&&svc.setScope(e)})},vm.isGuid=function(t){var e=new RegExp(/[a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12}/i);return e.test(t)},vm.permissions=function(t){return eavAdminDialogs.openPermissionsForGuid(svc.appId,t.StaticName,vm.refresh)},vm.openExport=function(t){return eavAdminDialogs.openContentExport(svc.appId,t.StaticName,vm.refresh)},vm.openImport=function(t){return eavAdminDialogs.openContentImport(svc.appId,t.StaticName,vm.refresh)},vm.createOrEditMetadata=function(t){var e=[vm.createItemDefinition(t,"ContentType")];eavAdminDialogs.openEditItems(e,svc.liveListReload)},vm.createItemDefinition=function(t,e){var n="ContentType Metadata";return t.Metadata?{EntityId:t.Metadata.Id,Title:n}:{ContentTypeName:e,Metadata:{Key:t.StaticName,KeyType:"string",TargetType:eavConfig.metadataOfContentType},Title:n,Prefill:{Label:t.Name,Description:t.Description}}}}contentTypeListController.$inject=["contentTypeSvc","eavAdminDialogs","appId","debugState","$translate","eavConfig"],angular.module("ContentTypesApp").controller("List",contentTypeListController)}(),function(){function t(t,e,n,a,i,r){var o=this,l=n(t);o.debug=a,o.item=e,o.item.ChangeStaticName=!1,o.item.NewStaticName=o.item.StaticName,o.ok=function(){l.save(e).then(function(){r.close(o.item)})},o.close=function(){r.dismiss("cancel")}}t.$inject=["appId","item","contentTypeSvc","debugState","$translate","$uibModalInstance"],angular.module("ContentTypesApp").controller("Edit",t)}(),function(){function t(t,e,n,a,i){var r=this;r.items=[n],r.types=e.types.liveList(),r.allInputTypes=e.getInputTypesList(),r.resetSubTypes=function(t){t.InputType=t.Type.toLowerCase()+"-default"},r.ok=function(){e.updateInputType(r.items[0]),i.close()},r.close=function(){i.dismiss("cancel")}}t.$inject=["appId","svc","item","$filter","$uibModalInstance"],angular.module("ContentTypesApp").controller("FieldEdit",t)}(),function(){function t(t,e,n,a){var i=this,r=e.newItem;i.items=[r(),r(),r(),r(),r(),r(),r(),r(),r(),r()],i.item=e.newItem(),i.types=e.types.liveList(),i.allInputTypes=e.getInputTypesList(),i.resetSubTypes=function(t){t.InputType=t.Type.toLowerCase()+"-default"},i.ok=function(){for(var t=i.items,n=[],r=0;r<t.length;r++)t[r].StaticName&&n.push(t[r]);e.addMany(n,0),a.close()},i.close=function(){a.dismiss("cancel")}}t.$inject=["appId","svc","$filter","$uibModalInstance"],angular.module("ContentTypesApp").controller("FieldsAdd",t)}(),function(){function t(t,e,n,a,i,r,o,l,s,d){var u=this,c=e(t,n);u.close=function(){a.dismiss("cancel")},u.items=c.liveList(),u.orderList=function(){var t=[];return u.items.map(function(e,n){t.push(e.Id)}),t},u.treeOptions={dropped:function(){u.dragEnabled=!1,c.reOrder(u.orderList()).then(function(){u.dragEnabled=!0})}},u.dragEnabled=!0,u.add=function(){i.open({animation:!0,templateUrl:"content-types/content-types-fields-add.html",controller:"FieldsAdd",controllerAs:"vm",size:"lg",resolve:{svc:function(){return c}}})},u.edit=function(t){i.open({animation:!0,templateUrl:"content-types/content-types-field-edit.html",controller:"FieldEdit",controllerAs:"vm",size:"lg",resolve:{svc:function(){return c},item:function(){return t}}})},u.inputTypeTooltip=function(t){return"unknown"!==t?t:"unknown means it's using an old definition for input-types - edit it to use the new definition"},u.setTitle=c.setTitle,u.tryToDelete=function(t){return t.IsTitle?l(["General.Messages.CantDelete","General.Terms.Title"],{target:"{0}"}).then(function(t){alert(t["General.Messages.CantDelete"].replace("{0}",t["General.Terms.Title"]))}):l("General.Questions.Delete",{target:"'"+t.StaticName+"' ("+t.Id+")"}).then(function(e){confirm(e)&&c["delete"](t)})},u.rename=function(t){l("General.Questions.Rename",{target:"'"+t.StaticName+"' ("+t.Id+")"}).then(function(e){var n=prompt(e);n&&c.rename(t,n)})},u.createOrEditMetadata=function(t,e){var n=[u.createItemDefinition(t,"All"),u.createItemDefinition(t,e),u.createItemDefinition(t,t.InputType)];r.openEditItems(n,c.liveListReload)},u.createItemDefinition=function(t,e){var n="All"===e?l.instant("DataType.All.Title"):e;return void 0!==t.Metadata[e]?{EntityId:t.Metadata[e].Id,Title:n}:{ContentTypeName:"@"+e,Metadata:{Key:t.Id,KeyType:"number",TargetType:s.metadataOfAttribute},Title:n,Prefill:{Name:t.StaticName}}}}t.$inject=["appId","contentTypeFieldSvc","contentType","$uibModalInstance","$uibModal","eavAdminDialogs","$filter","$translate","eavConfig","$scope"],angular.module("ContentTypesApp").controller("FieldList",t)}(),function(){angular.module("EavDirectives",[]).directive("icon",function(){return{restrict:"A",replace:!1,transclude:!1,link:function(t,e,n){var a=n.icon;e.addClass("glyphicon glyphicon-"+a)}}}).directive("stopEvent",function(){return{restrict:"A",link:function(t,e,n){n&&n.stopEvent&&e.bind(n.stopEvent,function(t){t.stopPropagation()})}}}).directive("showDebugAvailability",["eavConfig",function(t){return{restrict:"E",scope:{},template:'<span class="debug-indicator low-priority" ng-class=\'{ "debug-enabled": debugState.on }\' uib-tooltip="{{ \'AdvancedMode.Info.Available\' | translate }} \n'+t.versionInfo+"\" ng-click='askForLogging()'>&pi;</span><br/>",controller:["$scope","debugState","toastr",function(t,e,n){function a(){var t=prompt("enable extended logging? type desired duration in minutes:",1);null!==t&&void 0!==t&&e.enableExtendedLogging(t).then(function(t){console.log(t.data),n.info(t.data,{timeOut:1e3})})}t.debugState=e,t.askForLogging=function(){e.on&&a()}}]}}])}(),function(){function t(t,e,n,a,i,r){var o=this,l=t(a,i);o.edit=function(t){e.openItemEditWithEntityId(t.Id,l.liveListReload)},o.add=function(){e.openMetadataNew(a,"entity",l.PermissionTargetGuid,l.ctName,l.liveListReload)},o.items=l.liveList(),o.refresh=l.liveListReload,o.tryToDelete=function(t){confirm("Delete '"+t.Title+"' ("+t.Id+") ?")&&l["delete"](t.Id)},o.close=function(){r.dismiss("cancel")}}t.$inject=["permissionsSvc","eavAdminDialogs","eavConfig","appId","targetGuid","$uibModalInstance"],angular.module("PermissionsApp",["EavServices","EavConfiguration","EavAdminUi"]).controller("PermissionList",t)}(),angular.module("PipelineDesigner",["PipelineDesigner.filters","ngResource","EavConfiguration","EavServices","eavTemplates","eavNgSvcs","EavAdminUi","eavEditEntity"]),angular.module("PipelineDesigner").directive("datasource",["$timeout",function(t){return{restrict:"A",link:function(e,n){t(function(){e.makeDataSource(e.dataSource,n)}),e.$last===!0&&t(function(){e.$emit("ngRepeatFinished")})}}}]),function(){function t(t){var e=document.documentElement,n=t.getBoundingClientRect(),a=n.top+window.pageYOffset-e.clientTop,i=n.left+window.pageXOffset-e.clientLeft;return{top:a,left:i}}var e=function(t){if(!t.ReadOnly){var e=prompt("Rename DataSource",t.Name);e&&e.trim()&&(t.Name=e.trim())}},n=function(t){if(!t.ReadOnly){var e=prompt("Edit Description",t.Description);e&&e.trim()&&(t.Description=e.trim())}};angular.module("PipelineDesigner").controller("PipelineDesignerController",["appId","pipelineId","$scope","pipelineService","$location","debugState","$timeout","ctrlS","$filter","toastrWithHttpErrorHandling","eavAdminDialogs","$log","eavConfig","$q","getUrlParamMustRefactor","queryDef","plumbGui",function(a,i,r,o,l,s,d,u,c,p,m,v,g,f,b,y,h){"use strict";function I(){E.saveShortcut=u(function(){E.savePipeline()}),E.reInitQuery()}function T(t){return h.instance.reset(),h.connectionsInitialized=!1,S(y.data,E),t}function S(t,e){var n,a,i=/^\[module:moduleid\]=([0-9]*)$/gim,r=e.warnings=[];try{n=t.Pipeline.TestParameters;var o=i.exec(n);o&&0!==o.length||r.push("Your test values has no moduleid specified. You probably want to check your test-parameters."),a=o[1];var l=b("mid");a!==l&&r.push("Your test moduleid ("+a+") is different from the current moduleid ("+l+"). You probably want to check your test-values.")}catch(s){}}var E=this;E.debug=s,E.warnings=[];var C=p;r.debug=!1,r.queryDef=y,o.setAppId(a),E.reInitQuery=function(){var t=C.info("This shouldn't take long","Loading...");return y.loadQuery().then(function(){C.clear(t),S(y.data,E)},function(t){C.error(t,"Loading query failed")})},I(),r.makeDataSource=function(t,e){h.makeSource(t,e,r.dataSourceDrag),y.dsCount++},r.$on("ngRepeatFinished",function(){h.connectionsInitialized||(h.instance.batch(h.initWirings),r.repaint(),h.connectionsInitialized=!0)}),E.addSelectedDataSource=function(){var t=r.addDataSourceType.PartAssemblyAndType;y.addDataSource(t,null,null,r.addDataSourceType.Name),r.addDataSourceType=null,r.savePipeline()},E.remove=function(t){var e=y.data.DataSources[t];if(confirm('Delete DataSource "'+(e.Name||"(unnamed)")+'"?')){var n=h.dataSrcIdPrefix+e.EntityGuid;h.instance.selectEndpoints({element:n}).remove(),y.data.DataSources.splice(t,1)}},r.editName=e,r.editDescription=n,r.dataSourceDrag=function(e){var n=t(e.el),a=h.findDataSourceOfElement(e.el);r.$apply(function(){a.VisualDesignerData.Top=Math.round(n.top),a.VisualDesignerData.Left=Math.round(n.left)})},r.configureDataSource=function(t){t.ReadOnly||(y.dataSourceIsPersisted(t)?o.editDataSourcePart(t,y.data.InstalledDataSources):r.savePipeline())},r.showEndpointOverlays=!0,r.toggleEndpointOverlays=function(){r.showEndpointOverlays=!r.showEndpointOverlays;var t=h.instance.selectEndpoints();r.showEndpointOverlays?t.showOverlays():t.hideOverlays()},r.editPipelineEntity=function(){r.savePipeline().then(function(){E.saveShortcut.unbind(),m.openEditItems([{EntityId:y.id}],function(t){console.log("testing",t),E.reInitQuery().then(T).then(E.saveShortcut.rebind)})})},E.savePipeline=r.savePipeline=function(){return C.info("This shouldn't take long","Saving..."),h.pushPlumbConfigToQueryDef(h.instance),y.save().then(T)},r.repaint=function(){h.instance.repaintEverything()},r.toogleDebug=function(){r.debug=!r.debug},r.queryPipeline=function(t){function e(){C.info("Running Query ..."),o.queryPipeline(y.id).then(function(t){C.clear();var e=m.CreateResolve({testParams:y.data.Pipeline.TestParameters,result:t});m.OpenModal("pipelines/query-stats.html","QueryStats as vm","lg",e),d(function(){h.putEntityCountOnConnection(t)}),v.debug(t)},function(t){C.error(t,"Query failed")})}t?r.savePipeline().then(e):e()},E.typeInfo=y.dsTypeInfo}])}(),angular.module("PipelineDesigner.filters",[]).filter("typename",function(){return function(t,e){var n=t.match(/[^,\s]+/g);switch(e){case"classFullName":if(n)return n[0];break;case"className":if(n){var a=n[0].match(/[^\.]+/g);return a[a.length-1]}}return t}}),angular.module("PipelineManagement",["EavServices","EavConfiguration","eavNgSvcs","EavAdminUi"]).controller("PipelineManagement",["$uibModalInstance","appId","pipelineService","debugState","eavAdminDialogs","eavConfig",function($uibModalInstance,appId,pipelineService,debugState,eavAdminDialogs,eavConfig){var vm=this;vm.debug=debugState,vm.appId=appId,pipelineService.setAppId(appId),vm.refresh=function(){vm.pipelines=pipelineService.getPipelines(appId)},vm.refresh(),vm["delete"]=function(t){confirm('Delete Pipeline "'+t.Name+'" ('+t.Id+")?")&&pipelineService.deletePipeline(t.Id).then(function(){vm.refresh()},function(t){alert(t)})},vm.clone=function(t){pipelineService.clonePipeline(t.Id).then(function(){vm.refresh()},function(t){alert(t)})},vm.permissions=function(t){return eavAdminDialogs.openPermissionsForGuid(appId,t.Guid)},vm.add=function(){var t=[{ContentTypeName:"DataPipeline",Prefill:{TestParameters:eavConfig.pipelineDesigner.testParameters}}];eavAdminDialogs.openEditItems(t,vm.refresh)},vm.edit=function(t){eavAdminDialogs.openItemEditWithEntityId(t.Id,vm.refresh)},vm.design=function(t){return eavAdminDialogs.editPipeline(vm.appId,t.Id,vm.refresh)},vm.liveEval=function admin(){var inp=prompt("This is for very advanced operations. Only use this if you know what you're doing. \n\n Enter admin commands:");inp&&eval(inp)},vm.close=function(){$uibModalInstance.dismiss("cancel")}}]),function(){function t(){return Object.assign({},a,{strokeStyle:r[i++%o]})}function e(t,e){return[["Label",{id:"endpointLabel",location:[.5,t?0:1],label:"Default",cssClass:"noselect "+(t?"endpointSourceLabel":"endpointTargetLabel"),events:{dblclick:function(t){if(!e){var n=prompt("Rename Stream",t.label);n&&t.setLabel(n)}}}}]]}var n,a={lineWidth:4,strokeStyle:"#61B7CF",joinstyle:"round",outlineColor:"white",outlineWidth:2},i=0,r=["#009688","#00bcd4","#3f51b5","#9c27b0","#e91e63","#db4437","#ff9800","#60a917","#60a917","#008a00","#00aba9","#1ba1e2","#0050ef","#6a00ff","#aa00ff","#f472d0","#d80073","#a20025","#e51400","#fa6800","#f0a30a","#e3c800","#825a2c","#6d8764","#647687","#76608a","#a0522d"],o=r.length-1;console.log(t());var l={Connector:["Bezier",{curviness:70}],HoverPaintStyle:{lineWidth:4,strokeStyle:"#216477",outlineWidth:2,outlineColor:"white"},PaintStyle:t(),Container:"pipelineContainer"};angular.module("PipelineDesigner").factory("plumbGui",["queryDef","$filter","$log","$timeout",function(a,i,r,o){var s={dataSrcIdPrefix:"dataSource_",connectionsInitialized:!1};return s.buildSourceEndpoint=function(){return{paintStyle:{fillStyle:"transparent",radius:10,lineWidth:0},cssClass:"sourceEndpoint",maxConnections:-1,isSource:!0,anchor:["Continuous",{faces:["top"]}],overlays:e(!0,a.readOnly)}},s.buildTargetEndpoint=function(){return{paintStyle:{fillStyle:"transparent",radius:10,lineWidth:0},cssClass:"targetEndpoint",maxConnections:1,isTarget:!0,anchor:["Continuous",{faces:["bottom"]}],overlays:e(!1,a.readOnly),dropOptions:{hoverClass:"hover",activeClass:"active"}}},s.findDataSourceOfElement=function(t){var e=t.attributes.guid.value,n=a.data.DataSources,r=i("filter")(n,{EntityGuid:e})[0];return r},s.pushPlumbConfigToQueryDef=function(){var t=[];angular.forEach(s.instance.getAllConnections(),function(e){t.push({From:e.sourceId.substr(s.dataSrcIdPrefix.length),Out:e.endpoints[0].getOverlay("endpointLabel").label,To:e.targetId.substr(s.dataSrcIdPrefix.length),In:e.endpoints[1].getOverlay("endpointLabel").label})}),a.data.Pipeline.StreamWiring=t;var e=[];s.instance.selectEndpoints({target:s.dataSrcIdPrefix+"Out"}).each(function(t){e.push(t.getOverlay("endpointLabel").label)}),a.data.Pipeline.StreamsOut=e.join(",")},s.addEndpoint=function(t,e,n){if(!t.length)return void r.error({message:"Element not found",selector:t.selector});var a=s.findDataSourceOfElement(t[0]),i=t[0].id+(n?"_in_":"_out_")+e,o={uuid:i,enabled:!a.ReadOnly||"Out"===a.EntityGuid},l=s.instance.addEndpoint(t,n?s.buildTargetEndpoint():s.buildSourceEndpoint(),o);l.getOverlay("endpointLabel").setLabel(e)},s.initWirings=function(){angular.forEach(a.data.Pipeline.StreamWiring,function(e){var a=s.dataSrcIdPrefix+e.From,i=a+"_out_"+e.Out,o=s.dataSrcIdPrefix+e.To,l=o+"_in_"+e.In;s.instance.getEndpoint(i)||s.addEndpoint(n.getSelector("#"+a),e.Out,!1),s.instance.getEndpoint(l)||s.addEndpoint(n.getSelector("#"+o),e.In,!0);try{s.instance.connect({uuids:[i,l],paintStyle:t()})}catch(d){r.error({message:"Connection failed",from:i,to:l})}})},s.putEntityCountOnConnection=function(t){angular.forEach(t.Streams,function(t){var e=s.dataSrcIdPrefix+t.Source,n=s.dataSrcIdPrefix+t.Target;"00000000-0000-0000-0000-000000000000"!==t.Target&&t.Target!==a.data.Pipeline.EntityGuid||(n=s.dataSrcIdPrefix+"Out");var i=e+"_out_"+t.SourceOut,o=n+"_in_"+t.TargetIn,l=s.instance.getEndpoint(i),d=!1;l&&angular.forEach(l.connections,function(e){return e.endpoints[1].getUuid()===o?(e.setLabel({label:t.Count.toString(),cssClass:"streamEntitiesCount"}),void(d=!0)):void 0}),d||r.error("Stream not found",t,l)})},s.makeSource=function(t,e,n){s.instance.batch(function(){a.readOnly||s.instance.draggable(e,{grid:[20,20],drag:n});var i=t.Definition();if(i){if(angular.forEach(i.Out,function(t){s.addEndpoint(e,t,!1)}),angular.forEach(i.In,function(t){s.addEndpoint(e,t,!0)}),i.In){var r=s.buildTargetEndpoint();r.maxConnections=-1,s.instance.makeTarget(e,r)}i.DynamicOut&&s.instance.makeSource(e,s.buildSourceEndpoint(),{filter:".add-endpoint .new-connection"})}})},s.buildInstance=function(){s.instance=n.getInstance(l),s.instance.bind("connectionDetached",function(t){
if(t.targetId===s.dataSrcIdPrefix+"Out"){var e=angular.element(t.target),n=s.findDataSourceOfElement(e).dataSource.Definition().In,a=t.targetEndpoint.getOverlay("endpointLabel").label;-1===n.indexOf(a)&&o(function(){s.instance.deleteEndpoint(t.targetEndpoint)})}}),s.instance.bind("connection",function(t){if(s.connectionsInitialized)for(var e,n,a=0,i=function(a){var i=a.getOverlay("endpointLabel").getLabel();i===e&&t.targetEndpoint.id!==a.id&&angular.element(a.canvas).hasClass("targetEndpoint")&&(n=a)};;){a++;var r="Please name the Stream";a>1&&(r+=". Ensure the name is not used by any other Stream on this DataSource.");var o=t.targetEndpoint.getOverlay("endpointLabel");if(e=prompt(r,o.getLabel())){o.setLabel(e);var l=s.instance.getEndpoints(t.target.id);if(n=null,angular.forEach(l,i),!n)break}}})},window.jsPlumb.ready(function(){n=window.jsPlumb,s.buildInstance()}),s}])}(),function(){function t(){function t(t,n,a){e[t]={name:t,icon:e.iconPref+n,notes:a}}var e={iconPref:"eav-icon-"};return t("Unknown","circle","unknown type"),t("Cache","history","caching of data"),t("Filter","filter","filter data - usually returning less items than came in"),t("Logic","fork","logic operations - usually choosing between different streams"),t("Lookup","search","lookup operation - usually looking for other data based on a criteria"),t("Modify","star-half-alt","modify data - usually changing, adding or removing values"),t("Security","user","security - usually limit what the user sees based on his identity"),t("Sort","sort-alt-up","sort the items"),t("Source","export","source of new data - usually SQL, CSV or similar"),t("Target","target","target - usually just a destination of data"),e}var e=t();angular.module("PipelineDesigner").factory("queryDef",["pipelineId","pipelineService","$q","$location","toastr","$filter","eavConfig",function(t,n,a,i,r,o,l){var s={id:t,dsCount:0,readOnly:!0,data:null,dataSourceIsPersisted:function(t){return-1===t.EntityGuid.indexOf("unsaved")},addDataSource:function(t,e,a,i){e||(e={Top:100,Left:100});var r={VisualDesignerData:e,Name:i||o("typename")(t,"className"),Description:"",PartAssemblyAndType:t,EntityGuid:a||"unsaved"+(s.dsCount+1)};r=angular.extend(r,n.getNewDataSource(s.data,r)),s.data.DataSources.push(r)},loadQuery:function(){return n.getPipeline(s.id).then(function(t){s.data=t,s.id&&1!==s.data.DataSources.length?(s.readOnly=!t.Pipeline.AllowEdit,r.info(s.readOnly?"This pipeline is read only":"You can now design the Pipeline. \nVisit 2sxc.org/help for more.","Ready",{autoDismiss:!0})):(s.readOnly=!1,s.loadQueryFromDefaultTemplate())})},loadQueryFromDefaultTemplate:function(){var t=l.pipelineDesigner.defaultPipeline.dataSources;angular.forEach(t,function(t){s.addDataSource(t.partAssemblyAndType,t.visualDesignerData,t.entityGuid)}),s.data.Pipeline.StreamWiring=l.pipelineDesigner.defaultPipeline.streamWiring},save:function(){return s.readOnly=!0,n.savePipeline(s.data.Pipeline,s.data.DataSources).then(function(t){s.data.Pipeline=t.Pipeline,s.data.TestParameters=t.TestParameters,s.id=t.Pipeline.EntityId,i.search("PipelineId",t.Pipeline.EntityId),s.readOnly=!t.Pipeline.AllowEdit,s.data.DataSources=t.DataSources,n.postProcessDataSources(s.data),r.clear(),r.success("Pipeline "+t.Pipeline.EntityId+" saved and loaded","Saved",{autoDismiss:!0})},function(t){r.error(t,"Save Pipeline failed"),s.readOnly=!1})},_typeInfos:{},dsTypeInfo:function(t){var n=t.EntityGuid;if(s._typeInfos[n])return s._typeInfos[n];var a=null,i=o("filter")(s.data.InstalledDataSources,{PartAssemblyAndType:t.PartAssemblyAndType});if(i&&i.length){var r=i[0],l=r.PrimaryType;a=Object.assign({},l?e[l]:e.Unknown),r.Icon&&(a.icon=e.iconPrefix+r.Icon),r.DynamicOut&&(a.dynamicOut=!0),r.HelpLink&&(a.helpLink=r.HelpLink),r.EnableConfig&&(a.config=r.EnableConfig)}return a||(a=e.Unknown),s._typeInfos[n]=a,a}};return s}])}(),function(){angular.module("PipelineDesigner").controller("QueryStats",["testParams","result","$uibModalInstance",function(t,e,n){var a=this,i=e;a.testParameters=t.split("\n"),a.timeUsed=i.QueryTimer.Milliseconds,a.ticksUsed=i.QueryTimer.Ticks,a.result=i.Query,a.sources=i.Sources,a.streams=i.Streams,a.connections="todo",a.close=function(){n.dismiss("cancel")}}])}(),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var n=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>n.length)&&(e=n.length),e-=t.length;var a=n.lastIndexOf(t,e);return-1!==a&&a===e}),angular.module("EavServices",["ng","EavConfiguration","pascalprecht.translate","ngResource","ngAnimate","toastr"]),angular.module("EavServices").factory("contentItemsSvc",["$http","entitiesSvc","metadataSvc","svcCreator",function(t,e,n,a){return function(n,i){var r={};return r.contentType=i,r.appId=n,r=angular.extend(r,a.implementLiveList(function(){return t.get("eav/entities/GetAllOfTypeForAdmin",{params:{appId:r.appId,contentType:r.contentType}})})),r["delete"]=function(t,n){return e["delete"](r.contentType,t,n)},r.getColumns=function(){return t.get("eav/contenttype/getfields/",{params:{appid:r.appId,staticName:r.contentType}})},r}}]),angular.module("EavServices").factory("contentTypeSvc",["$http","eavConfig","svcCreator","$translatePartialLoader","$translate",function(t,e,n,a,i){return function(i,r){var o={};return o.scope=r||e.contentType.defaultScope,o.appId=i,o.retrieveContentTypes=function(){return t.get("eav/contenttype/get/",{params:{appid:o.appId,scope:o.scope}})},o=angular.extend(o,n.implementLiveList(o.retrieveContentTypes)),o.getDetails=function(e,n){return t.get("eav/contenttype/GetSingle",angular.extend({},n,{params:{appid:o.appId,contentTypeStaticName:e}})).then(function(t){return t&&t.data&&t.data.I18nKey&&a.addPart("content-types/"+t.data.I18nKey),t})},o.newItem=function(){return{StaticName:"",Name:"",Description:"",Scope:e.contentType.defaultScope}},o.save=function(e){return t.post("eav/contenttype/save/",e,{params:{appid:o.appId}}).then(o.liveListReload)},o["delete"]=function(e){return t.get("eav/contenttype/delete",{params:{appid:o.appId,staticName:e.StaticName}}).then(o.liveListReload)},o.setScope=function(t){o.scope=t,o.liveListReload()},o.createGhost=function(e){return t.get("eav/contenttype/createghost",{params:{appid:o.appId,sourceStaticName:e}}).then(o.liveListReload)},o}}]),angular.module("EavServices").factory("contentTypeFieldSvc",["$http","eavConfig","svcCreator","$filter",function(t,e,n,a){return function(e,i){var r={};return r.appId=e,r.contentType=i,r.typeListRetrieve=function(){return t.get("eav/contenttype/datatypes/",{params:{appid:r.appId}})},r._inputTypesList=[],r.getInputTypesList=function(){return r._inputTypesList.length>0?r._inputTypesList:(t.get("eav/contenttype/inputtypes/",{params:{appid:r.appId}}).then(function(t){function e(t,e){var n={dataType:t.Type.substring(0,t.Type.indexOf("-")),inputType:t.Type,label:t.Label,description:t.Description};r._inputTypesList.push(n)}angular.forEach(t.data,e),r._inputTypesList=a("orderBy")(r._inputTypesList,["dataType","inputType"])}),r._inputTypesList)},r.getFields=function(){return t.get("eav/contenttype/getfields",{params:{appid:r.appId,staticName:r.contentType.StaticName}}).then(function(t){if(t.data)for(var e=0;e<t.data.length;e++){var n=t.data[e];if(n.Metadata){var a=n.Metadata,i=a.All,r=a[n.Type],o=a[n.InputType];a.merged=angular.merge({},i,r,o)}}return t})},r=angular.extend(r,n.implementLiveList(r.getFields)),r.types=n.implementLiveList(r.typeListRetrieve),r.reOrder=function(e){return console.log(e),t.get("eav/contenttype/reorder",{params:{appid:r.appId,contentTypeId:r.contentType.Id,newSortOrder:JSON.stringify(e)}}).then(r.liveListReload)},r["delete"]=function(e){return t.get("eav/contenttype/delete",{params:{appid:r.appId,contentTypeId:r.contentType.Id,attributeId:e.Id}}).then(r.liveListReload)},r.addMany=function(e,n){return t.get("eav/contenttype/addfield/",{params:e[n]}).then(function(){e.length===++n?r.liveListReload():r.addMany(e,n)})},r.add=function(e){return t.get("eav/contenttype/addfield/",{params:e}).then(r.liveListReload)},r.newItemCount=0,r.newItem=function(){return{AppId:r.appId,ContentTypeId:r.contentType.Id,Id:0,Type:"String",InputType:"string-default",StaticName:"",IsTitle:0===r.liveList().length,SortOrder:r.liveList().length+r.newItemCount++}},r["delete"]=function(e){if(e.IsTitle)throw"Can't delete Title";return t.get("eav/contenttype/deletefield",{params:{appid:r.appId,contentTypeId:r.contentType.Id,attributeId:e.Id}}).then(r.liveListReload)},r.updateInputType=function(e){return t.get("eav/contenttype/updateinputtype",{params:{appid:r.appId,attributeId:e.Id,field:e.StaticName,inputType:e.InputType}}).then(r.liveListReload)},r.setTitle=function(e){return t.get("eav/contenttype/setTitle",{params:{appid:r.appId,contentTypeId:r.contentType.Id,attributeId:e.Id}}).then(r.liveListReload)},r.rename=function(e,n){return t.get("eav/contenttype/rename",{params:{appid:r.appId,contentTypeId:r.contentType.Id,attributeId:e.Id,newName:n}}).then(r.liveListReload)},r}}]),angular.module("EavServices").factory("ctrlS",["$window",function(t){function e(e){var n={_event:null,_action:null,_isbound:!1,detectCtrlSAndExcecute:function(t){if(!n._isbound)return null;if(83===t.keyCode&&(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)){if(null===n._action)return console.log("can't do anything on ctrl+S, no action registered");t.preventDefault(),n._action()}return null},bind:function(e){n._action=e,n._isbound=!0,n._event=t.addEventListener("keydown",n.detectCtrlSAndExcecute,!1)},unbind:function(){t.removeEventListener("keydown",n.detectCtrlSAndExcecute),n._isbound=!1},rebind:function(){if(null===n._action)throw"can't rebind, as it was never initially bound";if(n._isbound)throw"can't rebind, as it's still bound";n.bind(n._action)}};return n.bind(e),n}return e}]),angular.module("EavServices").factory("debugState",["$translate","toastr","$http",function(t,e,n){var a={on:!1};return a.toggle=function(){a.on=!a.on,e.clear(a.toast),a.toast=e.info(t.instant("AdvancedMode.Info.Turn"+(a.on?"On":"Off")),{timeOut:3e3})},a.autoEnableAsNeeded=function(t){t=window.event||t;var e=navigator.platform.match("Mac")?t.metaKey:t.ctrlKey;e&&!t.alreadySwitchedDebugState&&(a.toggle(),t.alreadySwitchedDebugState=!0)},a.enableExtendedLogging=function(t){return n.get("app-sys/system/extendedlogging",{params:{duration:t}})},a}]),angular.module("EavServices").factory("dragClass",function(){return document.addEventListener("dragover",function(){this===document&&document.body.classList.add("eav-dragging")}),document.addEventListener("dragleave",function(){this===document&&document.body.classList.remove("eav-dragging")}),{}}),angular.module("EavAdminUi",["ng","ui.bootstrap","EavServices","eavTemplates","PermissionsApp","ContentItemsAppAgnostic","PipelineManagement","ContentImportApp","ContentExportApp","HistoryApp"]).factory("eavAdminDialogs",["$uibModal","eavConfig","$window","entitiesSvc","contentTypeSvc","appId",function(t,e,n,a,i,r){var o={};return o.openContentItems=function(t,e,n,a){var i=o.CreateResolve({appId:t,contentType:e,contentTypeId:n});return o.OpenModal("content-items/content-items-agnostic.html","ContentItemsList as vm","fullscreen",i,a)},o.openContentImport=function(t,e,n){var a=o.CreateResolve({appId:t,contentType:e});return o.OpenModal("content-import-export/content-import.html","ContentImport as vm","lg",a,n)},o.openContentExport=function(t,e,n,a){var i=o.CreateResolve({appId:t,contentType:e,itemIds:a});return o.OpenModal("content-import-export/content-export.html","ContentExport as vm","lg",i,n)},o.openContentTypeEdit=function(t,e){var n=o.CreateResolve({item:t});return o.OpenModal("content-types/content-types-edit.html","Edit as vm","",n,e)},o.openContentTypeFields=function(t,e){var n=o.CreateResolve({contentType:t});return o.OpenModal("content-types/content-types-fields.html","FieldList as vm","xlg",n,e)},o.openContentTypeFieldsOfItems=function(t,e){return a.getManyForEditing(r,t).then(function(t){var n=t.data[0].Header.ContentTypeName,a=i(r);return a.getDetails(n).then(function(t){return o.openContentTypeFields(t.data,e)})})},o.openItemNew=function(t,e){return o.openEditItems([{ContentTypeName:t}],e,{partOfPage:!1})},o.openItemEditWithEntityId=function(t,e){return o.openEditItems([{EntityId:t}],e,{partOfPage:!1})},o.openEditItems=function(t,e,n){var a=angular.extend({items:t},n||{});a.partOfPage=Boolean(a.partOfPage),a.publishing=a.publishing||null,console.log("openEditItems: partOfPage: "+a.partOfPage," publishing: "+a.publishing);var i=o.CreateResolve(a);return o.OpenModal("form/main-form.html","EditEntityWrapperCtrl as vm","ent-edit",i,e)},o.openItemHistory=function(t,e){return o.OpenModal("content-items/history.html","History as vm","lg",o.CreateResolve({entityId:t}),e)},o.openMetadataNew=function(t,n,a,i,r){var l={};switch(n){case"entity":l.Key=a,l.KeyType="guid",l.TargetType=e.metadataOfEntity;break;case"attribute":l.Key=a,l.KeyType="number",l.TargetType=e.metadataOfAttribute;break;default:throw"targetType unknown, only accepts entity or attribute for now"}var s=[{ContentTypeName:i,Metadata:l}];o.openEditItems(s,r,{partOfPage:!1})},o.openPermissionsForGuid=function(t,e,n){var a=o.CreateResolve({appId:t,targetGuid:e});return o.OpenModal("permissions/permissions.html","PermissionList as vm","lg",a,n)},o.editPipeline=function(t,e,a){var i=o.derivedUrl({dialog:"pipeline-designer",pipelineId:e});n.open(i)},o.derivedUrl=function(t){var e=window.location.href;for(var n in t)t.hasOwnProperty(n)&&(e=o.replaceOrAddOneParam(e,n,t[n]));return e},o.replaceOrAddOneParam=function(t,e,n){var a=new RegExp("("+e+"=).*?(&)","i"),i=a.test(t)?t.replace(a,"$1"+n+"$2"):t+"&"+e+"="+n;return i},o._attachCallbacks=function(t,e){return"undefined"==typeof e?null:("function"==typeof e&&(e={close:e}),t.result.then(e.success||e.close,e.error||e.close,e.notify||e.close))},o.openModalComponent=function(e,n,a,i){var r=t.open({component:e,resolve:o.CreateResolve(a),size:n});return o._attachCallbacks(r,i)},o.OpenModal=function(e,n,a,i,r){var l=n.indexOf(" as "),s=l>0?n.substring(l+4):null;l>0&&(n=n.substring(0,l));var d=t.open({animation:!0,templateUrl:e,controller:n,controllerAs:s,size:a,resolve:i});return o._attachCallbacks(d,r)},o.CreateResolve=function(){var t={},e=arguments[0];for(var n in e)e.hasOwnProperty(n)&&(t[n]=o._create1Resolve(e[n]));return t},o._create1Resolve=function(t){return function(){return t}},o}]),angular.module("eavNgSvcs",["ng"]).config(["$locationProvider",function(t){t.html5Mode({enabled:!0,requireBase:!1})}]),angular.module("EavServices").service("fileType",function(){var t={};return t.iconPrefix="eav-icon-",t.defaultIcon="file",t.checkImgRegEx=/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*\.(?:jpg|jpeg|gif|png))(?:\?([^#]*))?(?:#(.*))?/i,t.extensions={doc:"file-word",docx:"file-word",xls:"file-excel",xlsx:"file-excel",ppt:"file-powerpoint",pptx:"file-powerpoint",pdf:"file-pdf",mp3:"file-audio",avi:"file-video",mpg:"file-video",mpeg:"file-video",mov:"file-video",mp4:"file-video",zip:"file-archive",rar:"file-archive",txt:"file-text",html:"file-code",css:"file-code",xml:"file-code",xsl:"file-code",vcf:"user"},t.getExtension=function(t){return t.substr(t.lastIndexOf(".")+1).toLowerCase()},t.getIconClass=function(e){return t.iconPrefix+(t.extensions[t.getExtension(e)]||t.defaultIcon)},t.isKnownType=function(e){return-1!==t.extensions.indexOf[t.getExtension(e)]},t.isImage=function(e){return t.checkImgRegEx.test(e)},t}),angular.module("EavServices").factory("historySvc",["$http","svcCreator",function(t,e){return function(n,a){var i={appId:n,entityId:a};return i=angular.extend(i,e.implementLiveList(function(){return t.get("eav/entities/history",{params:{appId:i.appId,entityId:i.entityId}}).then(function(t){for(var e=t.data,n=0;n<e.length;n++)e[n].VirtualVersion=e.length-n;return t})})),i.getVersionDetails=function(e){return t.get("eav/entities/historydetails",{params:{appId:i.appId,entityId:i.entityId,changeId:e}})},i}}]),function(){angular.module("EavServices").config(["$translateProvider","languages","$translatePartialLoaderProvider",function(t,e,n){t.preferredLanguage(e.currentLanguage.split("-")[0]).useSanitizeValueStrategy("escapeParameters").fallbackLanguage(e.fallbackLanguage).useLoader("$translatePartialLoader",{urlTemplate:e.i18nRoot+"{part}-{lang}.js"}).useLoaderCache(!0),n.addPart("admin").addPart("edit")}]).run(["$rootScope","$translate",function(t,e){t.$on("$translatePartialLoaderStructureChanged",function(){e.refresh()})}])}(),function(){function t(t){return window.$2sxc?window.$2sxc.urlParams.get(t):e(t)}function e(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)","i"),n=e.exec(location.search);if(null===n){var a=new RegExp("[#&]"+t+"=([^&#]*)","i");n=a.exec(location.hash)}if(null===n){var i=window.location.pathname.match(new RegExp("/"+t+"/([^/]+)","i"));null!==i&&i.length>1&&(n=i.reverse()[0])}else n=n[1];return null===n?"":decodeURIComponent(n.replace(/\+/g," "))}angular.module("InitParametersFromUrl",[]).factory("appId",function(){return t("appId")}).factory("zoneId",function(){return t("zoneId")}).factory("entityId",function(){return t("entityid")}).factory("contentTypeName",function(){return t("contenttypename")}).factory("pipelineId",function(){return t("pipelineId")}).factory("dialog",function(){return t("dialog")}).factory("$uibModalInstance",function(){return null}).factory("getUrlParamMustRefactor",function(){return t})}(),angular.module("EavServices").factory("latinizeText",function(){return function(t){var e={"Á":"A","Ă":"A","Ắ":"A","Ặ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ǎ":"A","Â":"A","Ấ":"A","Ậ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ä":"Ae","Ǟ":"A","Ȧ":"A","Ǡ":"A","Ạ":"A","Ȁ":"A","À":"A","Ả":"A","Ȃ":"A","Ā":"A","Ą":"A","Å":"A","Ǻ":"A","Ḁ":"A","Ⱥ":"A","Ã":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ḃ":"B","Ḅ":"B","Ɓ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ć":"C","Č":"C","Ç":"C","Ḉ":"C","Ĉ":"C","Ċ":"C","Ƈ":"C","Ȼ":"C","Ď":"D","Ḑ":"D","Ḓ":"D","Ḋ":"D","Ḍ":"D","Ɗ":"D","Ḏ":"D","ǲ":"D","ǅ":"D","Đ":"D","Ƌ":"D","Ǳ":"DZ","Ǆ":"DZ","É":"E","Ĕ":"E","Ě":"E","Ȩ":"E","Ḝ":"E","Ê":"E","Ế":"E","Ệ":"E","Ề":"E","Ể":"E","Ễ":"E","Ḙ":"E","Ë":"E","Ė":"E","Ẹ":"E","Ȅ":"E","È":"E","Ẻ":"E","Ȇ":"E","Ē":"E","Ḗ":"E","Ḕ":"E","Ę":"E","Ɇ":"E","Ẽ":"E","Ḛ":"E","Ꝫ":"ET","Ḟ":"F","Ƒ":"F","Ǵ":"G","Ğ":"G","Ǧ":"G","Ģ":"G","Ĝ":"G","Ġ":"G","Ɠ":"G","Ḡ":"G","Ǥ":"G","Ḫ":"H","Ȟ":"H","Ḩ":"H","Ĥ":"H","Ⱨ":"H","Ḧ":"H","Ḣ":"H","Ḥ":"H","Ħ":"H","Í":"I","Ĭ":"I","Ǐ":"I","Î":"I","Ï":"I","Ḯ":"I","İ":"I","Ị":"I","Ȉ":"I","Ì":"I","Ỉ":"I","Ȋ":"I","Ī":"I","Į":"I","Ɨ":"I","Ĩ":"I","Ḭ":"I","Ꝺ":"D","Ꝼ":"F","Ᵹ":"G","Ꞃ":"R","Ꞅ":"S","Ꞇ":"T","Ꝭ":"IS","Ĵ":"J","Ɉ":"J","Ḱ":"K","Ǩ":"K","Ķ":"K","Ⱪ":"K","Ꝃ":"K","Ḳ":"K","Ƙ":"K","Ḵ":"K","Ꝁ":"K","Ꝅ":"K","Ĺ":"L","Ƚ":"L","Ľ":"L","Ļ":"L","Ḽ":"L","Ḷ":"L","Ḹ":"L","Ⱡ":"L","Ꝉ":"L","Ḻ":"L","Ŀ":"L","Ɫ":"L","ǈ":"L","Ł":"L","Ǉ":"LJ","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ń":"N","Ň":"N","Ņ":"N","Ṋ":"N","Ṅ":"N","Ṇ":"N","Ǹ":"N","Ɲ":"N","Ṉ":"N","Ƞ":"N","ǋ":"N","Ñ":"N","Ǌ":"NJ","Ó":"O","Ŏ":"O","Ǒ":"O","Ô":"O","Ố":"O","Ộ":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Öe":"O","Ȫ":"O","Ȯ":"O","Ȱ":"O","Ọ":"O","Ő":"O","Ȍ":"O","Ò":"O","Ỏ":"O","Ơ":"O","Ớ":"O","Ợ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ȏ":"O","Ꝋ":"O","Ꝍ":"O","Ō":"O","Ṓ":"O","Ṑ":"O","Ɵ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Õ":"O","Ṍ":"O","Ṏ":"O","Ȭ":"O","Ƣ":"OI","Ꝏ":"OO","Ɛ":"E","Ɔ":"O","Ȣ":"OU","Ṕ":"P","Ṗ":"P","Ꝓ":"P","Ƥ":"P","Ꝕ":"P","Ᵽ":"P","Ꝑ":"P","Ꝙ":"Q","Ꝗ":"Q","Ŕ":"R","Ř":"R","Ŗ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ȑ":"R","Ȓ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꜿ":"C","Ǝ":"E","Ś":"S","Ṥ":"S","Š":"S","Ṧ":"S","Ş":"S","Ŝ":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṩ":"S","Ť":"T","Ţ":"T","Ṱ":"T","Ț":"T","Ⱦ":"T","Ṫ":"T","Ṭ":"T","Ƭ":"T","Ṯ":"T","Ʈ":"T","Ŧ":"T","Ɐ":"A","Ꞁ":"L","Ɯ":"M","Ʌ":"V","Ꜩ":"TZ","Ú":"U","Ŭ":"U","Ǔ":"U","Û":"U","Ṷ":"U","Ü":"Ue","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ǖ":"U","Ṳ":"U","Ụ":"U","Ű":"U","Ȕ":"U","Ù":"U","Ủ":"U","Ư":"U","Ứ":"U","Ự":"U","Ừ":"U","Ử":"U","Ữ":"U","Ȗ":"U","Ū":"U","Ṻ":"U","Ų":"U","Ů":"U","Ũ":"U","Ṹ":"U","Ṵ":"U","Ꝟ":"V","Ṿ":"V","Ʋ":"V","Ṽ":"V","Ꝡ":"VY","Ẃ":"W","Ŵ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẁ":"W","Ⱳ":"W","Ẍ":"X","Ẋ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ẏ":"Y","Ỵ":"Y","Ỳ":"Y","Ƴ":"Y","Ỷ":"Y","Ỿ":"Y","Ȳ":"Y","Ɏ":"Y","Ỹ":"Y","Ź":"Z","Ž":"Z","Ẑ":"Z","Ⱬ":"Z","Ż":"Z","Ẓ":"Z","Ȥ":"Z","Ẕ":"Z","Ƶ":"Z","Ĳ":"IJ","Œ":"OE","ᴀ":"A","ᴁ":"AE","ʙ":"B","ᴃ":"B","ᴄ":"C","ᴅ":"D","ᴇ":"E","ꜰ":"F","ɢ":"G","ʛ":"G","ʜ":"H","ɪ":"I","ʁ":"R","ᴊ":"J","ᴋ":"K","ʟ":"L","ᴌ":"L","ᴍ":"M","ɴ":"N","ᴏ":"O","ɶ":"OE","ᴐ":"O","ᴕ":"OU","ᴘ":"P","ʀ":"R","ᴎ":"N","ᴙ":"R","ꜱ":"S","ᴛ":"T","ⱻ":"E","ᴚ":"R","ᴜ":"U","ᴠ":"V","ᴡ":"W","ʏ":"Y","ᴢ":"Z","á":"a","ă":"a","ắ":"a","ặ":"a","ằ":"a","ẳ":"a","ẵ":"a","ǎ":"a","â":"a","ấ":"a","ậ":"a","ầ":"a","ẩ":"a","ẫ":"a","ä":"ae","ǟ":"a","ȧ":"a","ǡ":"a","ạ":"a","ȁ":"a","à":"a","ả":"a","ȃ":"a","ā":"a","ą":"a","ᶏ":"a","ẚ":"a","å":"a","ǻ":"a","ḁ":"a","ⱥ":"a","ã":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ḃ":"b","ḅ":"b","ɓ":"b","ḇ":"b","ᵬ":"b","ᶀ":"b","ƀ":"b","ƃ":"b","ɵ":"o","ć":"c","č":"c","ç":"c","ḉ":"c","ĉ":"c","ɕ":"c","ċ":"c","ƈ":"c","ȼ":"c","ď":"d","ḑ":"d","ḓ":"d","ȡ":"d","ḋ":"d","ḍ":"d","ɗ":"d","ᶑ":"d","ḏ":"d","ᵭ":"d","ᶁ":"d","đ":"d","ɖ":"d","ƌ":"d","ı":"i","ȷ":"j","ɟ":"j","ʄ":"j","ǳ":"dz","ǆ":"dz","é":"e","ĕ":"e","ě":"e","ȩ":"e","ḝ":"e","ê":"e","ế":"e","ệ":"e","ề":"e","ể":"e","ễ":"e","ḙ":"e","ë":"e","ė":"e","ẹ":"e","ȅ":"e","è":"e","ẻ":"e","ȇ":"e","ē":"e","ḗ":"e","ḕ":"e","ⱸ":"e","ę":"e","ᶒ":"e","ɇ":"e","ẽ":"e","ḛ":"e","ꝫ":"et","ḟ":"f","ƒ":"f","ᵮ":"f","ᶂ":"f","ǵ":"g","ğ":"g","ǧ":"g","ģ":"g","ĝ":"g","ġ":"g","ɠ":"g","ḡ":"g","ᶃ":"g","ǥ":"g","ḫ":"h","ȟ":"h","ḩ":"h","ĥ":"h","ⱨ":"h","ḧ":"h","ḣ":"h","ḥ":"h","ɦ":"h","ẖ":"h","ħ":"h","ƕ":"hv","í":"i","ĭ":"i","ǐ":"i","î":"i","ï":"i","ḯ":"i","ị":"i","ȉ":"i","ì":"i","ỉ":"i","ȋ":"i","ī":"i","į":"i","ᶖ":"i","ɨ":"i","ĩ":"i","ḭ":"i","ꝺ":"d","ꝼ":"f","ᵹ":"g","ꞃ":"r","ꞅ":"s","ꞇ":"t","ꝭ":"is","ǰ":"j","ĵ":"j","ʝ":"j","ɉ":"j","ḱ":"k","ǩ":"k","ķ":"k","ⱪ":"k","ꝃ":"k","ḳ":"k","ƙ":"k","ḵ":"k","ᶄ":"k","ꝁ":"k","ꝅ":"k","ĺ":"l","ƚ":"l","ɬ":"l","ľ":"l","ļ":"l","ḽ":"l","ȴ":"l","ḷ":"l","ḹ":"l","ⱡ":"l","ꝉ":"l","ḻ":"l","ŀ":"l","ɫ":"l","ᶅ":"l","ɭ":"l","ł":"l","ǉ":"lj","ſ":"s","ẜ":"s","ẛ":"s","ẝ":"s","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ᵯ":"m","ᶆ":"m","ń":"n","ň":"n","ņ":"n","ṋ":"n","ȵ":"n","ṅ":"n","ṇ":"n","ǹ":"n","ɲ":"n","ṉ":"n","ƞ":"n","ᵰ":"n","ᶇ":"n","ɳ":"n","ñ":"n","ǌ":"nj","ó":"o","ŏ":"o","ǒ":"o","ô":"o","ố":"o","ộ":"o","ồ":"o","ổ":"o","ỗ":"o","ö":"oe","ȫ":"o","ȯ":"o","ȱ":"o","ọ":"o","ő":"o","ȍ":"o","ò":"o","ỏ":"o","ơ":"o","ớ":"o","ợ":"o","ờ":"o","ở":"o","ỡ":"o","ȏ":"o","ꝋ":"o","ꝍ":"o","ⱺ":"o","ō":"o","ṓ":"o","ṑ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","õ":"o","ṍ":"o","ṏ":"o","ȭ":"o","ƣ":"oi","ꝏ":"oo","ɛ":"e","ᶓ":"e","ɔ":"o","ᶗ":"o","ȣ":"ou","ṕ":"p","ṗ":"p","ꝓ":"p","ƥ":"p","ᵱ":"p","ᶈ":"p","ꝕ":"p","ᵽ":"p","ꝑ":"p","ꝙ":"q","ʠ":"q","ɋ":"q","ꝗ":"q","ŕ":"r","ř":"r","ŗ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ȑ":"r","ɾ":"r","ᵳ":"r","ȓ":"r","ṟ":"r","ɼ":"r","ᵲ":"r","ᶉ":"r","ɍ":"r","ɽ":"r","ↄ":"c","ꜿ":"c","ɘ":"e","ɿ":"r","ß":"ss","ś":"s","ṥ":"s","š":"s","ṧ":"s","ş":"s","ŝ":"s","ș":"s","ṡ":"s","ṣ":"s","ṩ":"s","ʂ":"s","ᵴ":"s","ᶊ":"s","ȿ":"s","ɡ":"g","ᴑ":"o","ᴓ":"o","ᴝ":"u","ť":"t","ţ":"t","ṱ":"t","ț":"t","ȶ":"t","ẗ":"t","ⱦ":"t","ṫ":"t","ṭ":"t","ƭ":"t","ṯ":"t","ᵵ":"t","ƫ":"t","ʈ":"t","ŧ":"t","ᵺ":"th","ɐ":"a","ᴂ":"ae","ǝ":"e","ᵷ":"g","ɥ":"h","ʮ":"h","ʯ":"h","ᴉ":"i","ʞ":"k","ꞁ":"l","ɯ":"m","ɰ":"m","ᴔ":"oe","ɹ":"r","ɻ":"r","ɺ":"r","ⱹ":"r","ʇ":"t","ʌ":"v","ʍ":"w","ʎ":"y","ꜩ":"tz","ú":"u","ŭ":"u","ǔ":"u","û":"u","ṷ":"u","ü":"ue","ǘ":"u","ǚ":"u","ǜ":"u","ǖ":"u","ṳ":"u","ụ":"u","ű":"u","ȕ":"u","ù":"u","ủ":"u","ư":"u","ứ":"u","ự":"u","ừ":"u","ử":"u","ữ":"u","ȗ":"u","ū":"u","ṻ":"u","ų":"u","ᶙ":"u","ů":"u","ũ":"u","ṹ":"u","ṵ":"u","ᵫ":"ue","ꝸ":"um","ⱴ":"v","ꝟ":"v","ṿ":"v","ʋ":"v","ᶌ":"v","ⱱ":"v","ṽ":"v","ꝡ":"vy","ẃ":"w","ŵ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẁ":"w","ⱳ":"w","ẘ":"w","ẍ":"x","ẋ":"x","ᶍ":"x","ý":"y","ŷ":"y","ÿ":"y","ẏ":"y","ỵ":"y","ỳ":"y","ƴ":"y","ỷ":"y","ỿ":"y","ȳ":"y","ẙ":"y","ɏ":"y","ỹ":"y","ź":"z","ž":"z","ẑ":"z","ʑ":"z","ⱬ":"z","ż":"z","ẓ":"z","ȥ":"z","ẕ":"z","ᵶ":"z","ᶎ":"z","ʐ":"z","ƶ":"z","ɀ":"z","ﬀ":"ff","ﬃ":"ffi","ﬄ":"ffl","ﬁ":"fi","ﬂ":"fl","ĳ":"ij","œ":"oe","ﬆ":"st","ₐ":"a","ₑ":"e","ᵢ":"i","ⱼ":"j","ₒ":"o","ᵣ":"r","ᵤ":"u","ᵥ":"v","ₓ":"x"};return t.replace(/[^A-Za-z0-9\[\] ]/g,function(t){return e[t]||t})}}),angular.module("EavServices").factory("metadataSvc",["$http","appId",function(t,e){var n={};return n.getMetadata=function(n,a,i){return t.get("eav/metadata/getassignedentities",{params:{appId:e,assignmentObjectTypeId:n,keyType:"guid",key:a,contentType:i}})},n}]),angular.module("EavServices").factory("permissionsSvc",["$http","eavConfig","entitiesSvc","metadataSvc","svcCreator","contentTypeSvc",function(t,e,n,a,i,r){var o=e;return function(t,e){var l={PermissionTargetGuid:e,ctName:"PermissionConfiguration",ctId:0,EntityAssignment:o.metadataOfEntity,ctSvc:r(t)};return l=angular.extend(l,i.implementLiveList(function(){return a.getMetadata(l.EntityAssignment,l.PermissionTargetGuid,l.ctName).then(l.updateLiveAll)})),l.ctSvc.getDetails(l.ctName).then(function(t){l.ctId=t.data.Id}),l["delete"]=function(t){return n["delete"](l.ctName,t).then(l.liveListReload)},l}}]),angular.module("EavServices").factory("pipelineService",["$resource","$q","$filter","eavConfig","$http","contentTypeSvc","metadataSvc","eavAdminDialogs","appId",function(t,e,n,a,i,r,o,l,s){"use strict";var d={};d.pipelineResource=t("eav/PipelineDesigner/:action"),d.entitiesResource=t("eav/Entities/:action"),d.appId=0,d.getDataSourceDefinitionProperty=function(t,e){var a=n("filter")(t.InstalledDataSources,function(t){return t.PartAssemblyAndType===e.PartAssemblyAndType})[0];if(!a)throw"DataSource Definition not found: "+e.PartAssemblyAndType;return a};var u=function(t){var e=a.pipelineDesigner.outDataSource;t.DataSources.push({Name:e.name,Description:e.description,EntityGuid:"Out",PartAssemblyAndType:e.className,VisualDesignerData:e.visualDesignerData,ReadOnly:!0}),angular.forEach(t.DataSources,function(e){e.Definition=function(){return d.getDataSourceDefinitionProperty(t,e)},e.ReadOnly=e.ReadOnly||!t.Pipeline.AllowEdit,e.VisualDesignerData=e.VisualDesignerData||{Top:50,Left:50}})};return angular.extend(d,{getPipeline:function(t){var n=e.defer(),i=d.pipelineResource.get({action:"GetPipeline",id:t,appId:d.appId}),r=d.pipelineResource.query({action:"GetInstalledDataSources"});return e.all([i.$promise,r.$promise]).then(function(e){var i=JSON.parse(angular.toJson(e[0]));i.InstalledDataSources=JSON.parse(angular.toJson(e[1])),t||(i.Pipeline={AllowEdit:"True"});var r=a.pipelineDesigner.outDataSource;i.InstalledDataSources.push({PartAssemblyAndType:r.className,Name:r.name||r.className,In:r["in"],Out:null,allowNew:!1,PrimaryType:"Target",DynamicOut:!1}),u(i),n.resolve(i)},function(t){n.reject(t)}),n.promise},postProcessDataSources:function(t){n("filter")(t.DataSources,function(t){return"Out"===t.EntityGuid})[0]||u(t)},getNewDataSource:function(t,e){return{Definition:function(){return d.getDataSourceDefinitionProperty(t,e)}}},savePipeline:function(t,n){if(!d.appId)return e.reject("appId must be set to save a Pipeline");var a=[];return angular.forEach(n,function(t){var e=angular.copy(t);delete e.ReadOnly,a.push(e)}),d.pipelineResource.save({action:"SavePipeline",appId:d.appId,Id:t.EntityId},{pipeline:t,dataSources:a}).$promise},clonePipeline:function(t){return d.pipelineResource.get({action:"ClonePipeline",appId:d.appId,Id:t}).$promise},editDataSourcePart:function(t,e){var a=n("filter")(e,{PartAssemblyAndType:t.PartAssemblyAndType},!0)[0];console.log(a);var i=a&&a.ContentType?a.ContentType:"|Config "+n("typename")(t.PartAssemblyAndType,"classFullName"),d=4,u=t.EntityGuid;o.getMetadata(d,u,i).then(function(t){var e=t.data;e.length?l.openItemEditWithEntityId(e[0].Id):r(s,"System").getDetails(i,{ignoreErrors:!0}).then(function(){var t=[{ContentTypeName:i,Metadata:{TargetType:d,KeyType:"guid",Key:u}}];l.openEditItems(t)},function(){alert("Server reports error - this usually means that this data-source doesn't have any configuration")})})}}),angular.extend(d,{queryPipeline:function(t){return d.pipelineResource.get({action:"QueryPipeline",appId:d.appId,id:t}).$promise},setAppId:function(t){d.appId=t},getPipelines:function(){return d.entitiesResource.query({action:"GetEntities",appId:d.appId,contentType:"DataPipeline"})},deletePipeline:function(t){return d.pipelineResource.get({action:"DeletePipeline",appId:d.appId,id:t}).$promise}}),d}]),angular.module("EavServices").factory("svcCreator",["toastr","$translate","$timeout",function(t,e,n){var a={};return a.implementLiveList=function(a,i){var r={};return r.disableToastr=!!i,r.liveListCache=[],r.liveListCache.isLoaded=!1,r.liveList=function(){return 0!==r.liveListCache.length||r.liveListCache.isLoaded||r.liveListReload(),r.liveListCache},r._liveListUpdateWithResult=function(e){r.msg.isOpened?t.clear(r.msg):n(300).then(function(){t.clear(r.msg)}),r.liveListCache.length=0;for(var a=0;a<e.data.length;a++)r.liveListCache.push(e.data[a]);return r.liveListCache.isLoaded=!0,e},r.liveListSourceRead=a,r.liveListReload=function(){return e("General.Messages.Loading").then(function(e){r.msg=t.info(e)}),r.liveListSourceRead().then(r._liveListUpdateWithResult)},r.liveListReset=function(){r.liveListCache=[]},r},a}]),angular.module("EavServices").config(["toastrConfig",function(t){angular.extend(t,{autoDismiss:!1,containerId:"toast-container",maxOpened:5,newestOnTop:!0,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!1,target:"body"})}]).factory("toastrWithHttpErrorHandling",["toastr",function(t){return t.originalError=t.error,t.error=function(e,n,a){var i;e&&e.data&&e.data.Message?(i=e.data.Message,e.data.ExceptionMessage&&(i+="\n"+e.data.ExceptionMessage)):i=e,t.originalError(i,n,a)},t}]).factory("saveToastr",["toastr","$translate",function(t,e){function n(n){var a=t.info(e.instant("Message.Saving"));return n.then(function(n){return t.clear(a),t.success(e.instant("Message.Saved"),{timeOut:3e3}),n},function(n){return t.clear(a),t.error(e.instant("Message.ErrorWhileSaving")),n})}return n}]).factory("promiseToastr",["toastrWithHttpErrorHandling","$translate",function(t,e){function n(n,a,i,r,o,l,s){var d=t,u=d.info(e.instant(a));return n.then(function(t){return d.clear(u),d.success(e.instant(i),{timeOut:l||1e3}),t},function(t){return d.clear(u),d.error(t,e.instant(r)),t})}return n}]),angular.module("eavTemplates",[]).run(["$templateCache",function(t){t.put("content-import-export/content-export.html",'\r\n<div class="modal-header">\r\n    <button class="btn btn-default btn-square btn-subtle pull-right" type="button" icon="remove" ng-click="vm.close()"></button>\r\n    <h3 class="modal-title" translate="Content.Export.Title">cc</h3>\r\n</div>\r\n\r\n<div class="modal-body">\r\n    <div translate="Content.Export.Help"></div>\r\n    <formly-form form="vm.form" model="vm.formValues" fields="vm.formFields">\r\n    </formly-form>\r\n</div>\r\n\r\n<div class="modal-footer">\r\n    <button type="button" class="btn btn-primary pull-left" ng-click="vm.exportContent()" translate="Content.Export.Commands.Export"></button>\r\n</div>'),t.put("content-import-export/content-import.html",'<div ng-click="vm.debug.autoEnableAsNeeded($event)">\r\n    <!-- HEADER -->\r\n    <div class="modal-header">\r\n        <button class="btn btn-default btn-square btn-subtle pull-right" type="button" icon="remove" ng-click="vm.close()"></button>\r\n        <h3 class="modal-title"><span  translate="Content.Import.Title"></span> <span ng-show="vm.viewStateSelected > 0" translate="Content.Import.TitleSteps" translate-values="{step: vm.viewStateSelected}"></span></h3>\r\n    </div>\r\n    <!-- END HEADER -->\r\n\r\n    <div ng-switch="vm.viewStateSelected">\r\n\r\n        <!-- FORM -->\r\n        <div ng-switch-when="1">\r\n            <div class="modal-body">\r\n                <div translate="Content.Import.Help"></div>\r\n                <formly-form form="vm.form" model="vm.formValues" fields="vm.formFields"></formly-form>\r\n                <div class="text-warning" translate="Content.Import.Messages.BackupContentBefore"></div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary pull-left" ng-click="vm.evaluateContent()" ng-disabled="!vm.formValues.File || !vm.formValues.File.filename" translate="Content.Import.Commands.Preview"></button>\r\n            </div>\r\n        </div>\r\n        <!-- END FORM -->\r\n\r\n\r\n        <!-- WAITING -->\r\n        <div ng-switch-when="0">\r\n            <div class="modal-body"> {{\'Content.Import.Messages.WaitingForResponse\' | translate}}\r\n            </div>\r\n        </div>\r\n        <!-- END WAITING -->\r\n\r\n\r\n        <!-- EVALUATION RESULT -->\r\n        <div ng-switch-when="2">\r\n            <div class="modal-body">\r\n                <!-- DETAILS / STATISTICS -->\r\n                <div ng-if="vm.evaluationResult.Succeeded">\r\n                    <h4 translate="Content.Import.Evaluation.Detail.Title" translate-values="{filename: vm.formValues.File.filename}"></h4>\r\n                    <h5 translate="Content.Import.Evaluation.Detail.File.Title"></h5>\r\n                    <ul>\r\n                        <li translate="Content.Import.Evaluation.Detail.File.ElementCount" translate-values="{count: vm.evaluationResult.Detail.DocumentElementsCount}"></li>\r\n                        <li translate="Content.Import.Evaluation.Detail.File.LanguageCount" translate-values="{count: vm.evaluationResult.Detail.LanguagesInDocumentCount}"></li>\r\n                        <li translate="Content.Import.Evaluation.Detail.File.Attributes" translate-values="{count: vm.evaluationResult.Detail.AttributeNamesInDocument.length, attributes: vm.evaluationResult.Detail.AttributeNamesInDocument.join(\', \')}"></li>\r\n                    </ul>\r\n                    <h5 translate="Content.Import.Evaluation.Detail.Entities.Title"></h5>\r\n                    <ul>\r\n                        <li translate="Content.Import.Evaluation.Detail.Entities.Create" translate-values="{count: vm.evaluationResult.Detail.AmountOfEntitiesCreated}"></li>\r\n                        <li translate="Content.Import.Evaluation.Detail.Entities.Update" translate-values="{count: vm.evaluationResult.Detail.AmountOfEntitiesUpdated}"></li>\r\n                        <li translate="Content.Import.Evaluation.Detail.Entities.Delete" translate-values="{count: vm.evaluationResult.Detail.AmountOfEntitiesDeleted}"></li>\r\n                        <li translate="Content.Import.Evaluation.Detail.Entities.AttributesIgnored" translate-values="{count: vm.evaluationResult.Detail.AttributeNamesNotImported.length, attributes: vm.evaluationResult.Detail.AttributeNamesNotImported.join(\', \')}"></li>\r\n                    </ul>\r\n                    <div class="text-warning" translate="Content.Import.Messages.ImportCanTakeSomeTime"></div>\r\n                </div>\r\n                <!-- END DETAILS / STATISTICS -->\r\n                <!-- ERRORS -->\r\n                <div ng-if="!vm.evaluationResult.Succeeded">\r\n                    <h4 translate="Content.Import.Evaluation.Error.Title" translate-values="{filename: vm.formValues.File.filename}"></h4>\r\n                    <ul>\r\n                        <li ng-repeat="error in vm.evaluationResult.Detail">\r\n                            <div><span translate="Content.Import.Evaluation.Error.Codes.{{error.ErrorCode}}"></span></div>\r\n                            <div ng-if="error.ErrorDetail"><i translate="Content.Import.Evaluation.Error.Detail" translate-values="{detail: error.ErrorDetail}"></i>\r\n                            </div>\r\n                            <div ng-if="error.LineNumber"><i translate=Content.Import.Evaluation.Error.LineNumber" translate-values="{number: error.LineNumber}"></i>\r\n                            </div>\r\n                            <div ng-if="error.LineDetail"><i translate="Content.Import.Evaluation.Error.LineDetail" translate-values="{detail: error.LineDetail}"></i>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <!-- END ERRORS -->\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn pull-left" ng-click="vm.back()" icon="arrow-left"></button>\r\n                <button type="button" class="btn btn-default pull-left" ng-click="vm.importContent()" translate="Content.Import.Commands.Import" ng-disabled="!vm.evaluationResult.Succeeded"></button>\r\n            </div>\r\n        </div>\r\n        <!-- END EVALUATION RESULT -->\r\n\r\n\r\n        <!-- IMPORT RESULT -->\r\n        <div ng-switch-when="3">\r\n            <div class="modal-body">\r\n                <span ng-show="vm.importResult.Succeeded" translate="Content.Import.Messages.ImportSucceeded"></span>\r\n                <span ng-hide="vm.importResult.Succeeded" translate="Content.Import.Messages.ImportFailed"></span>\r\n            </div>\r\n        </div>\r\n        <!-- END IMPORT RESULT -->\r\n\r\n        <div ng-if="vm.debug.on">\r\n            <h3>Debug infos</h3>\r\n            <pre>{{vm.formValues | json}}</pre>\r\n        </div>\r\n    </div>\r\n</div>'),
t.put("content-items/content-edit.html",'<div class="modal-header">\r\n    <button type="button" class="btn btn-default btn-subtle" ng-click="vm.history()">\r\n        <span class="glyphicon glyphicon-time"> history / todo </span>\r\n    </button>\r\n    <h3 class="modal-title">Edit / New Content</h3>\r\n</div>\r\n\r\n<div class="modal-body">\r\n    this is where the edit appears. Would edit entity {{vm.entityId}} or add a {{vm.contentType}} - depending on the mode: {{vm.mode}}\r\n    <h3>Use cases</h3>\r\n    <ol>\r\n        <li>Edit an existing entity with ID</li>\r\n        <li>Create a new entity of a certaint content-type, just save and done (like from a "new" button without content-group)</li>\r\n        <li>Create a new entity of a certain type and assign it to a metadata thing (guid, int, string)</li>\r\n\r\n        <li>Create a new entity and put it into a content-group at the right place</li>\r\n        <li>Edit content-group: item + presentation </li>\r\n        <li>Edit multiple IDs/or new/mix: Edit multiple items with IDs</li>\r\n    </ol>\r\n\r\n    init of 1 edit\r\n    - entity-id in storage\r\n    - new-type + optional: assignment-id + assignment-type\r\n\r\n    - array of the above\r\n    --- [{id 17}, {type: "person"}, {type: person, asstype: 4, target: 0205}]\r\n\r\n    - content-group\r\n</div>\r\n'),t.put("content-items/content-items-agnostic.html",'<div ng-click="vm.debug.autoEnableAsNeeded($event)" class="content-items-agnostic">\r\n    <div class="modal-header">\r\n        <button class="btn btn-default btn-square btn-subtle pull-right" type="button" ng-click="vm.close()"><i icon="remove"></i></button>\r\n        <h3 class="modal-title" translate="Content.Manage.Title"></h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <button type="button" class="btn btn-primary btn-square" ng-click="vm.add()"><i icon="plus"></i></button>\r\n        <button type="button"\r\n                class="btn btn-default btn-square"\r\n                uib-tooltip="{{ \'ContentTypes.Buttons.Export\' | translate }}"\r\n                ng-click="vm.openExport()">\r\n            <i icon="export"></i>\r\n        </button>\r\n	    <button ng-if="vm.debug.on" type="button" class="btn btn-warning btn-square" ng-click="vm.refresh()"><i icon="repeat"></i></button>\r\n        <button ng-if="vm.debug.on" type="button" class="btn btn-warning btn-square" ng-click="vm.debugFilter()"><i icon="filter"></i></button>\r\n\r\n		<div ag-grid="vm.gridOptions" class="ag-grid-wrapper"></div>\r\n	    \r\n        <show-debug-availability class="pull-right" ></show-debug-availability>\r\n    </div>\r\n</div>'),t.put("content-items/history-details.html",'<div>\r\n    <div class="modal-header">\r\n        <button class="btn btn-default btn-subtle btn-square pull-right" type="button" ng-click="vm.close()">\r\n            <span class="glyphicon glyphicon-remove"></span>\r\n        </button>\r\n        <h3 class="modal-title">History Details {{vm.ChangeId}} of {{vm.entityId}}</h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <h1>todo</h1>\r\n        <table class="table table-striped table-hover">\r\n            <thead>\r\n            <tr>\r\n                <th>Field</th>\r\n                <th>Language</th>\r\n                <th>Value</th>\r\n                <th>SharedWith</th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="item in vm.items | orderBy:SysCreatedDate:reverse">\r\n                <td>{{item.Field}}</td>\r\n                <td>{{item.Language}}</td>\r\n                <td>{{item.Value}}</td>\r\n                <td>{{item.SharedWith}}</td>\r\n\r\n            </tr>\r\n            <tr ng-if="!vm.items.length">\r\n                <td colspan="100">No History</td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n\r\n        <button class="btn btn-primary pull-right" type="button" ng-click="vm.restore()">\r\n            <span class="glyphicon glyphicon-ok">todo restore</span>\r\n        </button>    </div>\r\n\r\n</div>'),t.put("content-items/history.html",'<div>\r\n    <div class="modal-header">\r\n        <button class="btn btn-default btn-square btn-subtle pull-right" type="button" ng-click="vm.close()">\r\n            <span class="glyphicon glyphicon-remove"></span>\r\n        </button>\r\n        <h3 class="modal-title">{{ "Content.History.Title" | translate:\'{ id:vm.entityId }\' }}History of {{vm.entityId}}</h3>\r\n    </div>\r\n    <div class="modal-body">\r\n\r\n        <table class="table table-striped table-hover">\r\n            <thead>\r\n            <tr>\r\n                <th translate="Content.History.Table.Id"></th>\r\n                <th translate="Content.History.Table.When"></th>\r\n                <th translate="Content.History.Table.User"></th>\r\n                <th translate="Content.History.Table.Action"></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="item in vm.items | orderBy:SysCreatedDate:reverse">\r\n                <td><span uib-tooltip="ChangeId: {{item.ChangeId}}">{{item.VirtualVersion}}</span></td>\r\n                <td>{{item.SysCreatedDate.replace("T", " ")}}</td>\r\n                <td>{{item.User}}</td>\r\n                <td>\r\n                    <button type="button" class="btn btn-xs" ng-click="vm.details(item)">\r\n                        <span class="glyphicon glyphicon-search"></span>\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n                <tr ng-if="!vm.items.length">\r\n                    <td colspan="100" translate="General.Messages.NothingFound"></td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n</div>'),t.put("content-types/content-types-edit.html",'<div ng-click="vm.debug.autoEnableAsNeeded($event)">\r\n    <div class="modal-header">\r\n        <button class="btn btn-default btn-square btn-subtle pull-right" type="button" ng-click="vm.close()"><i icon="remove"></i></button>\r\n        <h3 class="modal-title" translate="ContentTypeEdit.Title"></h3>\r\n    </div>\r\n\r\n    <div class="modal-body">\r\n        {{ "ContentTypeEdit.Name" | translate }}: <br />\r\n        <input ng-model="vm.item.Name" class="input-lg" />\r\n        <br />\r\n        {{ "ContentTypeEdit.Description" | translate }}: <br />\r\n        <input ng-model="vm.item.Description" class="input-lg"/><br/>\r\n\r\n        <div>\r\n            {{ "ContentTypeEdit.Scope" | translate }}: <br />\r\n            <span ng-if="vm.debug.on">\r\n                <div class="alert alert-danger">the scope should almost never be changed - <a href="http://2sxc.org/help?tag=scope" _target="_blank">see help</a></div>\r\n            </span>\r\n            <input ng-disabled="!vm.debug.on" ng-model="vm.item.Scope" class="input-lg" />\r\n        </div>\r\n\r\n        <div ng-if="vm.debug.on" class="alert-danger">\r\n            <h3>Static Name</h3>\r\n            <input type="checkbox" class="input-lg" ng-model="vm.item.ChangeStaticName"/> Really edit StaticName??? - this is usually a very bad idea\r\n            <br/>\r\n            <input ng-model="vm.item.NewStaticName" ng-disabled="!vm.item.ChangeStaticName" class="input-lg"/>\r\n        </div>\r\n        <div ng-if="vm.debug.on" class="alert-danger">\r\n            <h3>Shared Content Type (Ghost)</h3>\r\n            <div>Note: this can\'t be edited in the UI, for now if you really know what you\'re doing, do it in the DB</div>\r\n            <div>Uses Type Definition of: {{vm.item.SharedDefId}}</div> \r\n        </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button class="btn btn-primary btn-square pull-left btn-lg" type="button" ng-click="vm.ok()"><i icon="ok"></i></button>\r\n        <show-debug-availability class="pull-right" style="margin-top: 20px;"></show-debug-availability>\r\n    </div>\r\n</div>'),t.put("content-types/content-types-field-edit.html",'<div class="modal-header">\r\n    <button icon="remove" class="btn btn-default btn-square btn-subtle pull-right" type="button" ng-click="vm.close()"></button>\r\n    <h3 class="modal-title" translate="Fields.TitleEdit"></h3>\r\n</div>\r\n<div class="modal-body">\r\n    <table class="table table-hover table-manage-eav">\r\n        <thead>\r\n        <tr>\r\n            <th translate="Fields.Table.Name" style="width: 33%"></th>\r\n            <th translate="Fields.Table.DataType" style="width: 33%">Data Type</th>\r\n            <th translate="Fields.Table.InputType" style="width: 33%">Input Type</th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr ng-repeat="item in vm.items">\r\n            <td>\r\n                <input ng-model="item.StaticName" ng-required="true" class="input-lg" style="width: 100%" disabled="disabled"/>\r\n            </td>\r\n            <td>\r\n                <input ng-model="item.Type" disabled="disabled" class="input-lg" style="width: 100%"/>\r\n            </td>\r\n            <td>\r\n                <select class="input-lg" ng-model="item.InputType" style="width: 100%"\r\n                        uib-tooltip="{{ (vm.allInputTypes | filter: { inputType: item.InputType})[0].description }}"\r\n                        ng-options="o.inputType as o.label for o in vm.allInputTypes | filter: {dataType: item.Type.toLowerCase() } ">\r\n                </select>\r\n\r\n            </td>\r\n        </tr>\r\n        </tbody>\r\n    </table>\r\n</div>\r\n<div class="modal-footer">\r\n    <button icon="ok" class="btn btn-lg btn-primary btn-square pull-left" type="button" ng-click="vm.ok()"></button>\r\n</div>'),t.put("content-types/content-types-fields-add.html",'<div class="modal-header">\r\n    <button icon="remove" class="btn btn-default btn-square btn-subtle pull-right" type="button" ng-click="vm.close()"></button>\r\n    <h3 class="modal-title" translate="Fields.TitleEdit"></h3>\r\n</div>\r\n<div class="modal-body">\r\n    <table class="table table-hover table-manage-eav">\r\n        <thead>\r\n        <tr>\r\n            <th translate="Fields.Table.Name" style="width: 33%"></th>\r\n            <th translate="Fields.Table.DataType" style="width: 33%">Data Type</th>\r\n            <th translate="Fields.Table.InputType" style="width: 33%">Input Type</th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr ng-repeat="item in vm.items">\r\n            <td>\r\n                <input ng-model="item.StaticName" ng-required="true" class="input-lg" style="width: 100%"/>\r\n            </td>\r\n            <td>\r\n                <select class="input-lg" ng-model="item.Type" style="width: 100%"\r\n                        uib-tooltip="{{ \'DataType.\' + item.Type + \'.Explanation\' | translate }}"\r\n                        ng-options="o as \'DataType.\' + o + \'.Choice\' | translate for o in vm.types | orderBy: \'toString()\' "\r\n                        ng-change="vm.resetSubTypes(item)">\r\n                    <option>-- select --</option>\r\n                </select>\r\n            </td>\r\n            <td>\r\n                <select class="input-lg" ng-model="item.InputType" style="width: 100%"\r\n                        uib-tooltip="{{ (vm.allInputTypes | filter: { inputType: item.InputType})[0].description }}"\r\n                        ng-options="o.inputType as o.label for o in vm.allInputTypes | filter: {dataType: item.Type.toLowerCase() } ">\r\n                </select>\r\n\r\n            </td>\r\n        </tr>\r\n        </tbody>\r\n    </table>\r\n</div>\r\n<div class="modal-footer">\r\n    <button icon="ok" class="btn btn-lg btn-primary btn-square pull-left" type="button" ng-click="vm.ok()"></button>\r\n</div>'),t.put("content-types/content-types-fields.html",'<div>\r\n\r\n    <div class="modal-header">\r\n        <button class="btn btn-default btn-subtle btn-square pull-right" type="button" ng-click="vm.close()"><i icon="remove"></i></button>\r\n        <h3 class="modal-title" translate="Fields.Title"></h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <button icon="plus" ng-click="vm.add()" class="btn btn-primary btn-square"></button>\r\n\r\n        <!-- Table of content types for editing -->\r\n        <table ui-tree="vm.treeOptions" data-drag-enabled="vm.dragEnabled" ui-tree-nodes ng-model="vm.items" class="table table-hover table-manage-eav eav-admin-field-list">\r\n            <thead>\r\n                <tr>\r\n                    <th class="mini-btn-1"></th>\r\n                    <th translate="Fields.Table.Title" class="mini-btn-1"></th>\r\n                    <th translate="Fields.Table.Name" style="width: 35%"></th>\r\n                    <th translate="Fields.Table.DataType" style="width: 20%"></th>\r\n                    <th translate="Fields.Table.InputType" style="width: 20%"></th>\r\n                    <th translate="Fields.Table.Label" style="width: 30%"></th>\r\n                    <th translate="Fields.Table.Notes" style="width: 50%"></th>\r\n                    <!--<th translate="Fields.Table.Sort" class="mini-btn-2"></th>-->\r\n                    <th translate="Fields.Table.Action" class="mini-btn-2"></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr ng-repeat="item in vm.items track by $id(item)" ui-tree-node class="clickable-row" ng-click="vm.createOrEditMetadata(item, item.Type)" ng-class="[ \'type-\' + item.Type.toLowerCase(), \'subtype-\' + item.InputType.substring(item.InputType.indexOf(\'-\') + 1, 100)]">\r\n                    <td ui-tree-handle><i class="glyphicon glyphicon-sort"></i></td>\r\n                    <td stop-event="click">\r\n                        <button type="button" class="btn btn-xs btn-square" ng-style="(item.IsTitle ? \'\' : \'color: transparent !important\')" ng-click="vm.setTitle(item)">\r\n                            <i icon="{{item.IsTitle ? \'star\' : \'star-empty\'}}"></i>\r\n                        </button>\r\n                    </td>\r\n                    <td class="clickable"><span uib-tooltip="{{ \'Id: \' + item.Id}}">{{item.StaticName}}</span></td>\r\n                    <td class="text-nowrap clickable">\r\n                        {{item.Type}}\r\n                    </td>\r\n                    <td class="text-nowrap InputType" stop-event="click">\r\n                        <span class="clickable" uib-tooltip="{{ vm.inputTypeTooltip(item.InputType) }}" ng-click="vm.edit(item)">\r\n                            <i icon="pencil"></i>\r\n                            {{item.InputType.substring(item.InputType.indexOf(\'-\') + 1, 100)}}\r\n                        </span>\r\n                    </td>\r\n                    <td class="text-nowrap clickable">\r\n                        {{item.Metadata.All.Name}}\r\n                    </td>\r\n                    <!--<td>-</td>-->\r\n                    <td class="text-nowrap clickable">\r\n                        <div class="hide-overflow-text">\r\n                            {{item.Metadata.All.Notes}}\r\n                        </div>\r\n                    </td>\r\n\r\n                    <!--<td class="text-nowrap" stop-event="click">\r\n                        <button icon="arrow-up" type="button" class="btn btn-xs btn-square" ng-disabled="$first" ng-click="vm.moveUp(item)"></button>\r\n                        <button icon="arrow-down" type="button" class="btn btn-xs btn-square" ng-disabled="$last" ng-click="vm.moveDown(item)"></button>\r\n                    </td>-->\r\n                    <td stop-event="click">\r\n                        <button icon="cog" type="button" class="btn btn-xs btn-square" ng-click="vm.rename(item)"></button>\r\n                        <button icon="remove" type="button" class="btn btn-xs btn-square" ng-click="vm.tryToDelete(item)"></button>\r\n                    </td>\r\n                </tr>\r\n                <tr ng-if="!vm.items.length">\r\n                    <td colspan="100" translate="General.Messages.NothingFound"></td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n\r\n        <!--Ordered  {{vm.orderList()}} Test-->\r\n    </div>\r\n\r\n\r\n</div>'),t.put("content-types/content-types.html",'<div ng-controller="List as vm" ng-click="vm.debug.autoEnableAsNeeded($event)">\r\n    <div class="modal-header">\r\n        <h3 class="modal-title" translate="ContentTypes.Title"></h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <!-- Buttons on top -->\r\n        <button title="{{ \'General.Buttons.Add\' | translate }}" type="button" class="btn btn-primary btn-square" ng-click="vm.edit()"><i icon="plus"></i></button>\r\n\r\n\r\n        <span class="btn-group" ng-if="vm.debug.on">\r\n            <button title="{{ \'General.Buttons.Refresh\' | translate }}" type="button" class="btn btn-warning btn-square" ng-click="vm.refresh()"><i icon="repeat"></i></button>\r\n            <button title="todo" type="button" class="btn btn-warning btn-icon" ng-click="vm.createGhost()"><i class="eav-icon-ghost"></i></button>\r\n            <button title="{{ \'ContentTypes.Buttons.ChangeScope\' | translate }}" type="button" class="btn btn-warning btn-square" ng-click="vm.changeScope()"><i icon="record"></i></button>\r\n            <button title="{{ \'General.Buttons.System\' | translate }}" type="button" class="btn btn-warning btn-square" ng-click="vm.liveEval()"><i icon="flash"></i></button>\r\n        </span>\r\n        <!-- Table of content types for editing -->\r\n        <table class="table table-hover" style="table-layout: fixed; width: 100%">\r\n            <thead>\r\n            <tr>\r\n                <!--<th translate="ContentTypes.TypesTable.Items" class="col-id"></th>-->\r\n                <th translate="ContentTypes.TypesTable.Name" style="width: 50%"></th>\r\n                <th class="mini-btn-1"></th>\r\n                <th translate="ContentTypes.TypesTable.Description" style="width: 50%"></th>\r\n                <th translate="ContentTypes.TypesTable.Fields" class="mini-btn-2"></th>\r\n                <th translate="ContentTypes.TypesTable.Actions" class="mini-btn-5"></th>\r\n                <th class="mini-btn-1"> </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-if="vm.items.isLoaded" ng-repeat="item in vm.items | orderBy:\'Name\'" class="clickable-row" ng-click="vm.editItems(item)">\r\n                <!--<td style="text-align: center" class="clickable"> {{item.Items}} </td>-->\r\n                <td class="clickable">\r\n                    <span class="text-nowrap hide-overflow-text" style="max-width: 400px" uib-tooltip="{{item.Label}} ({{item.Name}})">{{item.Label}} <span ng-if="item.Name != item.Label">({{item.Name}})</span></span>\r\n                </td>\r\n                <td class="clickable" style="text-align: right">\r\n                    <div class="badge pull-right badge-primary hover-pair" stop-event="click" ng-click="vm.addItem(item.StaticName)"><span class="hover-default">{{item.Items}}</span><span class="hover-hover eav-icon-plus"></span></div></td>\r\n                <td class="clickable">\r\n                    <div class="text-nowrap hide-overflow-text" style="max-width: 500px" uib-tooltip="{{item.Description}}">{{item.Description}}</div>\r\n                </td>\r\n                <td stop-event="click">\r\n                    <button ng-if="!item.UsesSharedDef" type="button" class="btn btn-xs" style="width: 60px" ng-click="vm.editFields(item)">\r\n                        <i class="eav-icon-fields"></i>&nbsp;<span style="width: 22px; text-align: right">{{item.Fields}}</span>\r\n                    </button>\r\n                    <button ng-if="item.UsesSharedDef" uib-tooltip="{{ \'ContentTypes.Messages.SharedDefinition\' | translate:item }}" type="button" class="btn btn-default btn-xs" style="width: 60px">\r\n                        <i class="eav-icon-ghost"></i>&nbsp;<span style="width: 22px; text-align: right">{{item.Fields}}</span>\r\n                    </button>\r\n                </td>\r\n\r\n                <td class="text-nowrap" stop-event="click">\r\n                    <span class="btn-group">\r\n                        <button uib-tooltip="{{ \'General.Buttons.Rename\' | translate }} - {{  \'ContentTypes.Messages.Type\' + (item.UsesSharedDef ? \'Shared\' : \'Own\')  | translate:item }}" type="button" class="btn btn-xs btn-square" ng-click="vm.edit(item)">\r\n                            <i icon="heart{{ (item.UsesSharedDef ? \'-empty\' : \'\') }}"></i>\r\n                        </button>\r\n                        <button uib-tooltip="{{ \'General.Buttons.Metadata\' | translate }}" type="button" class="btn btn-xs btn-square" ng-click="vm.createOrEditMetadata(item)">\r\n                            <i class="eav-icon-tag"></i>\r\n                        </button>\r\n                        <button uib-tooltip="{{ \'ContentTypes.Buttons.Export\' | translate }}" type="button" class="btn btn-xs btn-square" ng-click="vm.openExport(item)">\r\n                            <i icon="export"></i>\r\n                        </button>\r\n                        <button uib-tooltip="{{ \'ContentTypes.Buttons.Import\' | translate }}" type="button" class="btn btn-xs btn-square" ng-click="vm.openImport(item)">\r\n                            <i icon="import"></i>\r\n                        </button>\r\n                        <button type="button" class="btn btn-xs btn-square" ng-click="vm.permissions(item)" ng-if="vm.isGuid(item.StaticName)">\r\n                            <i icon="user"></i>\r\n                        </button>\r\n                    </span>\r\n                </td>\r\n                <td stop-event="click">\r\n                    <button icon="remove" type="button" class="btn btn-xs" ng-click="vm.tryToDelete(item)"></button>\r\n                </td>\r\n            </tr>\r\n            <tr ng-if="!vm.items.length">\r\n                <td colspan="100">{{ \'General.Messages.Loading\' | translate }} / {{ \'General.Messages.NothingFound\' | translate }}</td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <show-debug-availability class="pull-right"></show-debug-availability>\r\n    </div>\r\n    <div ng-if="vm.debug.on">\r\n\r\n        <h3>Notes / Debug / ToDo</h3>\r\n        <ol>\r\n            <li>get validators to work on all dialogs</li>\r\n        </ol>\r\n    </div>\r\n</div>\r\n'),t.put("permissions/permissions.html",'    <div class="modal-header">\r\n        <button class="btn btn-default btn-square pull-right" type="button" ng-click="vm.close()"><i icon="remove"></i></button>\r\n        <h3 class="modal-title" translate="Permissions.Title"></h3>\r\n    </div>\r\n    <div class="modal-body">\r\n\r\n        <button type="button" class="btn btn-primar btn-square" ng-click="vm.add()"><i icon="plus"></i></button>\r\n        <button ng-if="vm.debug.on" type="button" class="btn btn-square" ng-click="vm.refresh()"><i icon="repeat"></i></button>\r\n\r\n        <table class="table table-striped table-hover table-manage-eav">\r\n            <thead>\r\n            <tr>\r\n                <th translate="Permissions.Table.Id" style="width: 60px"></th>\r\n                <th translate="Permissions.Table.Name" style="width: 33%"></th>\r\n                <th translate="Permissions.Table.Condition" style="width: 33%"></th>\r\n                <th translate="Permissions.Table.Grant" style="width: 33%"></th>\r\n                <th translate="Permissions.Table.Actions" style="width: 40px"></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="item in vm.items | orderBy:\'Title\'" class="clickable-row" ng-click="vm.edit(item)">\r\n                <td class="clickable">{{item.Id}}</td>\r\n                <td class="clickable">{{item.Title}}</td>\r\n                <td class="clickable">{{item.Condition}}</td>\r\n                <td class="clickable">{{item.Grant}}</td>\r\n                <td class="text-nowrap" stop-event="click">\r\n                    <button icon="remove" type="button" class="btn btn-xs btn-square" ng-click="vm.tryToDelete(item)"></button>\r\n                </td>\r\n            </tr>\r\n            <tr ng-if="!vm.items.length">\r\n                <td colspan="100" translate="General.Messages.NothingFound"></td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>'),t.put("pipelines/pipeline-designer.html",'<div class="ng-cloak">\r\n    <div ng-controller="PipelineDesignerController as vm" ng-click="vm.debug.autoEnableAsNeeded($event)">\r\n        <div id="pipelineContainer">\r\n            <div ng-repeat="dataSource in queryDef.data.DataSources"\r\n                 datasource\r\n                 guid="{{dataSource.EntityGuid}}"\r\n                 id="dataSource_{{dataSource.EntityGuid}}"\r\n                 class="dataSource"\r\n                 ng-attr-style="{{ \'top: \' + dataSource.VisualDesignerData.Top +\'px; left: \' + dataSource.VisualDesignerData.Left + \'px; \' + (dataSource.VisualDesignerData.Width ? \'min-width: \' + dataSource.VisualDesignerData.Width + \'px\' : \'\') }}">\r\n                <div class="configure" ng-click="configureDataSource(dataSource)" title="Configure this DataSource" \r\n                     ng-if="!dataSource.ReadOnly && vm.typeInfo(dataSource).config">\r\n                    <i class="eav-icon-settings"></i>\r\n                </div>\r\n                <i class="type-info {{vm.typeInfo(dataSource).icon}}" title="{{vm.typeInfo(dataSource).notes}}"></i>\r\n                <div class="name noselect" title="Click to edit the Name" ng-click="editName(dataSource)">\r\n                    {{dataSource.Name || \'(no name)\'}}<i class="show-hover-inline eav-icon-pencil"></i>\r\n                </div><br />\r\n                <div class="description noselect" title="Click to edit the Description" ng-click="editDescription(dataSource)">\r\n                    {{dataSource.Description}}<i class="show-hover-inline eav-icon-pencil"></i>\r\n                </div><br />\r\n                <div class="typename" ng-attr-title="{{dataSource.PartAssemblyAndType}}">\r\n                    Type: {{dataSource.PartAssemblyAndType | typename: \'className\'}}\r\n                </div>\r\n                <div class="add-endpoint" title="Drag a new Out-Connection from here" \r\n                     ng-if="!dataSource.ReadOnly && vm.typeInfo(dataSource).dynamicOut">\r\n                    <i class="new-connection eav-icon-up-dir"></i>\r\n                </div>\r\n                <div class="delete eav-icon-cancel" title="delete this" ng-click="vm.remove($index)" ng-if="!dataSource.ReadOnly"></div>\r\n                <a class="help eav-icon-help-circled" title="help for this data source" \r\n                   href="{{vm.typeInfo(dataSource).helpLink}}" target="_blank"\r\n                   ng-if="vm.typeInfo(dataSource).helpLink"></a>\r\n            </div>\r\n        </div>\r\n        <div class="actions panel panel-default">\r\n            <div class="panel-heading">\r\n                <span class="pull-left">Actions</span>\r\n                <a href="http://2sxc.org/help" class="btn btn-info btn-xs pull-right" target="_blank"><i class="eav-icon-info-circled"></i> Help</a>\r\n            </div>\r\n            <div class="panel-body">\r\n                <div class="btn-group" role="group" style="width: 100%">\r\n                    <button type="button" class="btn btn-primary btn-block"\r\n                            title="Query the Data of this Pipeline. Note that it doesn\'t save changes - so if you have unexpected behaviour after rewiring - save first"\r\n                            ng-click="queryPipeline(true)"\r\n                            style="width: 75%">\r\n                        <i class="eav-icon-ok"></i> &amp;\r\n                        <i class="eav-icon-play"></i>Query\r\n                    </button>\r\n                    <button type="button" class="btn btn-primary btn-block" title="Quick Query without saving (using server definition)"\r\n                            ng-click="queryPipeline(false)"\r\n                            style="width: 25%; margin-top: 4px">\r\n                        <i class="eav-icon-play"></i>\r\n                    </button>\r\n                </div>\r\n\r\n                <select class="form-control" ng-model="addDataSourceType" \r\n                        ng-disabled="queryDef.readOnly" \r\n                        ng-change="vm.addSelectedDataSource()" \r\n                        ng-options="d.Name for d in queryDef.data.InstalledDataSources | filter: {allowNew: \'!false\'} | orderBy: \'Name\'">\r\n                    <option value="">-- Add DataSource --</option>\r\n                </select>\r\n                <button type="button" class="btn btn-primary btn-block" ng-disabled="queryDef.readOnly" ng-click="savePipeline()">\r\n                    <i class="eav-icon-ok"></i> Save\r\n                </button>\r\n                <br/>\r\n                \r\n                <!-- test parameters -->\r\n                <div>\r\n                    <div>\r\n                        <strong>Test Parameters</strong>\r\n                        <i class="eav-icon-pencil" ng-click="editPipelineEntity()"></i>\r\n                    </div>\r\n                    <div><ul><li ng-repeat="param in queryDef.data.Pipeline.TestParameters.split(\'\\n\')">\r\n                                {{param}}\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <!-- show warnings if detected -->\r\n                <div ng-if="vm.warnings.length">\r\n                    <div><i class="eav-icon-attention" style="color: red"></i><strong>Warnings</strong></div>\r\n                    <ol>\r\n                        <li ng-repeat="warn in vm.warnings">{{warn}}</li>\r\n                    </ol>\r\n                    <br />\r\n                </div>\r\n                \r\n                <!-- show description if available -->\r\n                <div ng-if="queryDef.data.Pipeline.Description">\r\n                    <div><strong>Query Description</strong></div>\r\n                    <div>{{queryDef.data.Pipeline.Description}}</div>\r\n                </div>\r\n                <br/>\r\n                <button type="button" class="btn btn-info btn-xs" ng-click="toggleEndpointOverlays()"><i class="eav-icon-info-circled"></i> {{showEndpointOverlays ? \'Hide\' : \'Show\' }} Overlays</button>\r\n                <button type="button" class="btn btn-info btn-xs" ng-click="repaint()"><i class="eav-icon-reload"></i> Repaint</button>\r\n                <button type="button" class="btn btn-info btn-xs" ng-if="vm.debug.on" ng-click="toogleDebug()"><i class="eav-icon-info-circled"></i> {{debug ? \'Hide\' : \'Show\'}} Debug Info</button>\r\n\r\n                <show-debug-availability class="pull-right"></show-debug-availability>\r\n            </div>\r\n        </div>\r\n        <toaster-container></toaster-container>\r\n        <pre ng-if="debug">{{queryDef.data | json}}</pre>\r\n    </div>\r\n</div>\r\n'),t.put("pipelines/pipelines.html",'<div ng-click="vm.debug.autoEnableAsNeeded($event)">\r\n    <div class="modal-header">\r\n        <h3 class="modal-title" translate="Pipeline.Manage.Title"></h3>\r\n    </div>\r\n    <div class="modal-body ng-cloak">\r\n        <div translate="Pipeline.Manage.Intro"></div>\r\n        <div>\r\n            <button icon="plus" type="button" class="btn btn-primary btn-square" ng-click="vm.add()"></button>\r\n            <span class="btn-group" ng-if="vm.debug.on">\r\n                <button type="button" class="btn btn-warning btn-square" ng-click="vm.refresh()"><i icon="repeat"></i></button>\r\n                <button type="button" class="btn btn-warning btn-square" ng-click="vm.liveEval()"><i icon="flash"></i></button>\r\n            </span>\r\n            <table class="table table-hover table-manage-eav">\r\n                <thead>\r\n                <tr>\r\n                    <th translate="Pipeline.Manage.Table.Id" class="col-id"></th>\r\n                    <th translate="Pipeline.Manage.Table.Name"></th>\r\n                    <th translate="Pipeline.Manage.Table.Description"></th>\r\n                    <th translate="Pipeline.Manage.Table.Actions" class="mini-btn-4"></th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr ng-repeat="pipeline in vm.pipelines | orderBy:\'Name\'" class="clickable-row" ng-click="vm.design(pipeline)">\r\n                    <td class="clickable">{{pipeline.Id}}</td>\r\n                    <td class="clickable">{{pipeline.Name}}</td>\r\n                    <td class="clickable">{{pipeline.Description}}</td>\r\n                    <td class="text-nowrap mini-btn-4" stop-event=\'click\'>\r\n                        <span class="btn-group">\r\n                            <button title="{{ \'General.Buttons.Edit\' | translate }}" class="btn btn-xs" ng-click="vm.edit(pipeline)"><i icon="cog"></i></button>\r\n                            <button title="{{ \'General.Buttons.Copy\' | translate }}" type="button" class="btn btn-xs" ng-click="vm.clone(pipeline)"><i icon="duplicate"></i></button>\r\n                            <button title="{{ \'General.Buttons.Permissions\' | translate }}" type="button" class="btn btn-xs" ng-click="vm.permissions(pipeline)"><i icon="user"></i></button>\r\n                        </span>\r\n                        <button title="{{ \'General.Buttons.Delete\' | translate }}" type="button" class="btn btn-xs" ng-click="vm.delete(pipeline)"><i icon="remove"></i></button>\r\n                    </td>\r\n                </tr>\r\n                <tr ng-if="!vm.pipelines.length">\r\n                    <td colspan="100" translate="General.Messages.NothingFound"></td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n\r\n        <show-debug-availability class="pull-right"></show-debug-availability>\r\n    </div>\r\n\r\n</div>'),
t.put("pipelines/query-stats.html",'<div class="modal-header">\r\n    <button icon="remove" class="btn pull-right" type="button" ng-click="vm.close()"></button>\r\n    <h3 class="modal-title" translate="Pipeline.Stats.Title"></h3>\r\n</div>\r\n\r\n<div class="modal-body">\r\n    <div translate="Pipeline.Stats.Intro"></div>\r\n\r\n    <div>\r\n        <h3 translate="Pipeline.Stats.ParamTitle"></h3>\r\n        <div translate="Pipeline.Stats.ExecutedIn" translate-values="{ ms: vm.timeUsed, ticks: vm.ticksUsed }"></div>\r\n        <div>\r\n            <ul>\r\n                <li ng-repeat="param in vm.testParameters">{{param}}</li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <div>\r\n        <h3 translate="Pipeline.Stats.QueryTitle"></h3>\r\n        <pre>{{vm.result | json}}</pre>\r\n    </div>\r\n    <div>\r\n        <h3 translate="Pipeline.Stats.SourcesAndStreamsTitle"></h3>\r\n        <h4 translate="Pipeline.Stats.Sources.Title"></h4>\r\n        <table>\r\n            <tr>\r\n                <th translate="Pipeline.Stats.Sources.Guid"></th>\r\n                <th translate="Pipeline.Stats.Sources.Type"></th>\r\n                <th translate="Pipeline.Stats.Sources.Config"></th>\r\n            </tr>\r\n            <tr ng-repeat="s in vm.sources">\r\n                <td uib-tooltip="{{s}}"><pre>{{s.Guid.substring(0, 13)}}...</pre></td>\r\n                <td>{{s.Type}}</td>\r\n                <td uib-tooltip="{{s.Configuration}}">\r\n                    <ol>\r\n                        <li ng-repeat="(key, value) in s.Configuration"><b>{{key}}</b>=<em>{{value}}</em></li>\r\n                    </ol>\r\n                </td>\r\n            </tr>\r\n        </table>\r\n\r\n        <h4 translate="Pipeline.Stats.Streams.Title"></h4>\r\n        <table>\r\n            <tr>\r\n                <th translate="Pipeline.Stats.Streams.Source"></th>\r\n                <th translate="Pipeline.Stats.Streams.Target"></th>\r\n                <th translate="Pipeline.Stats.Streams.Items"></th>\r\n                <th translate="Pipeline.Stats.Streams.Error"></th>\r\n            </tr>\r\n            <tr ng-repeat="sr in vm.streams">\r\n                <td><pre>{{sr.Source.substring(0, 13) + ":" + sr.SourceOut}}</pre></td>\r\n                <td><pre>{{sr.Target.substring(0, 13) + ":" + sr.TargetIn}}</pre></td>\r\n                <td><span>{{sr.Count}}</span></td>\r\n                <td><span>{{sr.Error}}</span></td>\r\n            </tr>\r\n        </table>\r\n\r\n    </div>\r\n</div>')}]);